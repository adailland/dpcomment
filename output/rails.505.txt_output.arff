% Generated by Discussion model rails.505.txt
% File generated on 2017/08/09 19:32:26

@relation pr1502321546707

@attribute author String
@attribute textual String
@attribute isProjectMember {TRUE, FALSE}
@attribute isInvited {TRUE, FALSE}
@attribute numberOfWords numeric
@attribute commentsSoFar numeric
@attribute allUtterancesSoFar numeric
@attribute utterancesInCommentSoFar numeric
@attribute utteredByOriginalPoster {TRUE, FALSE}
@attribute hasCapitalizedWord {TRUE, FALSE}
@attribute containsShould {TRUE, FALSE}
@attribute hasDecisions {TRUE, FALSE}
@attribute howManyDecisions numeric
@attribute idComment numeric
@attribute idPara numeric

@data
dlee,"Update: as ncreuschling points out, there was a typo in the pull request message that said  HTML verb  instead of  HTTP verb .",FALSE,FALSE,22,0,0,0,TRUE,FALSE,FALSE,TRUE,0,1,1
dlee,"Updated: update forms default to PUT instead of PATCH for current apps. Defaults to PATCH for new apps.",FALSE,FALSE,18,0,1,1,TRUE,TRUE,FALSE,TRUE,0,1,2
dlee,"PATCH is the correct HTTP verb to map to the #update action. The semantics forPATCH allows for partial updates, whereas PUT requires a complete replacement.",FALSE,FALSE,25,0,2,2,TRUE,TRUE,FALSE,TRUE,0,1,3
dlee,"adds the #patch verb to routes to detect PATCH requests",FALSE,FALSE,10,0,4,4,TRUE,TRUE,FALSE,TRUE,0,1,4
dlee,"adds #patch? to Request",FALSE,FALSE,4,0,5,5,TRUE,TRUE,FALSE,TRUE,0,1,5
dlee,"adds the PATCH -> update mapping in the #resource(s) routes.",FALSE,FALSE,10,0,6,6,TRUE,TRUE,FALSE,TRUE,0,1,6
dlee,"changes default form helpers to prefer :patch instead of :put for updates only for new apps",FALSE,FALSE,16,0,8,8,TRUE,FALSE,FALSE,TRUE,0,1,7
dlee,"changes documentation and comments to indicate the preference for PATCH",FALSE,FALSE,10,0,9,9,TRUE,TRUE,FALSE,TRUE,0,1,8
dlee,"This change tries to maintain complete backwards compatibility by keeping theoriginal PUT -> update mapping. Users using the #resource(s) routes should notnotice a change in behavior since both PUT and PATCH requests get mapped toupdate.",FALSE,FALSE,35,0,10,10,TRUE,TRUE,TRUE,TRUE,0,1,9
dasch,"GitHub needs a +1 button.",FALSE,FALSE,5,1,11,0,FALSE,TRUE,FALSE,TRUE,0,2,1
benatkin,"I googled for HTTP verbs and clicked the first result and PATCH isn't listed.",FALSE,FALSE,14,2,12,0,FALSE,TRUE,FALSE,TRUE,0,3,1
benatkin,"Where is it?",FALSE,FALSE,3,2,14,2,FALSE,FALSE,FALSE,TRUE,0,3,2
benatkin,"Also I hardly think that updating everything except the primary key and the created_at timestamp is a PATCH.",FALSE,FALSE,18,2,15,3,FALSE,TRUE,FALSE,TRUE,0,3,3
dlee,"@benatkin http://www.w3.org/Protocols/rfc2068/rfc2068",FALSE,FALSE,2,3,16,0,TRUE,FALSE,FALSE,TRUE,0,4,1
dlee,"For past discussion, see issues #348 and #425.",FALSE,FALSE,8,3,17,1,TRUE,FALSE,FALSE,TRUE,0,4,2
dasch,"The example needs to be indented 2 spaces so it'll show up correctly in the docs.",FALSE,FALSE,16,4,18,0,FALSE,TRUE,FALSE,TRUE,0,5,1
dlee,"@josevalim, @fxn: Hey guys, this pull request has been sitting here for over a month unnoticed. It seems like master is now hosting code for Rails 3.2, so I'm thinking it can be merged in?",FALSE,FALSE,35,5,19,0,TRUE,TRUE,FALSE,TRUE,0,6,1
josevalim,"It seems fine for me with the view configuration option. I am a bit concerned about generating more routes (routes generation is already slow), but I don't consider it a blocker at first. /cc @nzkoz",FALSE,TRUE,35,6,20,0,FALSE,TRUE,FALSE,TRUE,0,7,1
fxn,"Yes I had it in mind, but waiting for 3.1 to start working on 3.2 proper.",FALSE,TRUE,16,7,21,0,FALSE,TRUE,FALSE,TRUE,0,8,1
fxn,"Just a ping to say I am still waiting for 3.1 and have not forgotten this patch. That's because albeit 3-1-stable is branched, I prefer a master that does not move too much because cherry-picking back to 3-1-stable is very common these days. Focus is 3.1 now.",FALSE,TRUE,47,8,22,0,FALSE,TRUE,FALSE,TRUE,0,9,1
fxn,"The patch does not merge cleanly anymore, by the way, in case you want to maintain it in sync.",FALSE,TRUE,19,8,23,1,FALSE,FALSE,FALSE,TRUE,0,9,2
dlee,"@fxn, cool, glad to know this hasn't been forgotten. Let me know when you're ready to merge so I can update the pull request.",FALSE,FALSE,24,9,24,0,TRUE,TRUE,FALSE,TRUE,0,10,1
jeremy,"Nice patch!",FALSE,FALSE,2,10,25,0,FALSE,TRUE,FALSE,TRUE,0,11,1
jeremy,"I think this will break apps (and engines) that use explicit put routes to override a default resources route. After upgrading Rails, users will see that the form seems to bypass their put override.",FALSE,FALSE,34,10,27,2,FALSE,TRUE,FALSE,TRUE,0,11,2
steveklabnik,"+1 from me.",FALSE,FALSE,3,11,28,0,FALSE,FALSE,FALSE,TRUE,0,12,1
steveklabnik,"I wish GitHub had a better way to subscribe to issues instead of just commenting. I feel like  +1  is just noise, but I want to see what happens with this pull...",FALSE,FALSE,32,11,29,1,FALSE,TRUE,FALSE,TRUE,0,12,2
bcardarella,"@steveklabnik can't you just click the 'Enable notifications for this Pull Request' link at the bottom?",FALSE,FALSE,16,12,30,0,FALSE,TRUE,FALSE,TRUE,0,13,1
guilleiguaran,"@steveklabnik test clicking in the link at the end of this page:",FALSE,FALSE,12,13,31,0,FALSE,FALSE,FALSE,TRUE,0,14,1
guilleiguaran,"Notifications for new comments on this Pull Request are off. Enable notifications for this Pull Request",FALSE,FALSE,16,13,32,1,FALSE,TRUE,FALSE,TRUE,0,14,2
guilleiguaran,"@jeremy This one is candidate for Rails 3.2 or 4.0?",FALSE,FALSE,10,13,33,2,FALSE,TRUE,FALSE,TRUE,0,14,3
jeremy,"3.2 candidate for sure. This needs thorough attention for a clean upgrade, however.",FALSE,TRUE,13,14,34,0,FALSE,TRUE,FALSE,TRUE,0,15,1
jeremy,"The guides need closer attention. Perusing the diff, I see a lot of search/replace changes from PUT to PATCH. I think having PUT just disappear will be too confusing. Gotta explain this change each step of the way!",FALSE,TRUE,38,14,35,1,FALSE,TRUE,FALSE,TRUE,0,15,2
jeremy,"Anyone care to take up the torch on this?",FALSE,TRUE,9,14,36,2,FALSE,FALSE,FALSE,TRUE,0,15,3
stevegraham,"i must be the only person in the world that disagrees with  PUT requires a complete replacement , as per RFC2616  HTTP/1.1 does not define how a PUT method affects the state of an origin server ",FALSE,FALSE,35,15,38,1,FALSE,TRUE,FALSE,TRUE,0,16,1
stevegraham,"that said i like the name PATCH better than PUT for the purposes of what it is used for here.",FALSE,FALSE,20,15,40,3,FALSE,TRUE,FALSE,TRUE,0,16,2
dlee,"I can refine this patch if the core team decides it will definitely go into Rails 3.2... don't want to write another huge patch just to be pushed off to the next version :).",FALSE,FALSE,34,16,41,0,TRUE,TRUE,FALSE,TRUE,0,17,1
dlee,"@jeremy can you give an example scenario where the put overrides would break? We might be able to provide a workaround, or at least put some notes in the documentation so that users aren't caught off-guard. Please suggest a workaround or an excerpt that can be added to the documentation.",FALSE,FALSE,50,16,43,2,TRUE,TRUE,FALSE,TRUE,0,17,2
fxn,"Yes, we talked about this patch after 3.1 and it is in the  roadmap  for 3.2 if it is good to go by then.",FALSE,TRUE,24,17,44,0,FALSE,TRUE,FALSE,TRUE,0,18,1
fxn,"@stevegraham RFCs are not axiomatic systems, but I think there's no controversy in that PUT means  put this resource at that URL  ( The PUT method requests that the enclosed entity be stored under the supplied Request-URI. ).",FALSE,TRUE,36,17,46,2,FALSE,TRUE,FALSE,TRUE,0,18,2
fxn,"You're sending the resource itself, and in the target URL you either create a new resource ( If the Request-URI does not point to an existing resource, and that URI is capable of being defined as a new resource by the requesting user agent, the origin server can create the resource with that URI. ), or else replace the existing one ( If the Request-URI refers to an already existing resource, the enclosed entity SHOULD be considered as a modified version of the one residing on the origin server. ).",FALSE,TRUE,86,17,47,3,FALSE,TRUE,FALSE,TRUE,0,18,3
fxn,"It is the app's choice to conform to that spec. Nowadays to do partial updates in a RESTFul way you need to define ad-hoc resources. For example, to toggle the  paid  flag of an invoice you may PUT to /invoices/:id/paid, but if you play by the rules you need PATCH for partial updates to /invoices/:id.",FALSE,TRUE,55,17,48,4,FALSE,TRUE,FALSE,TRUE,0,18,4
josevalim,"Aside the docs concern, this pull request looks good to me. I would just add the following changes (but I can do it myself in later commits after this is merged, this is more of a mental note):",FALSE,TRUE,38,18,49,0,FALSE,TRUE,FALSE,TRUE,0,19,1
josevalim,"We could move config.action_view.default_method_for_update to config.default_method_for_update so other frameworks can read it as well (see 2 below);",FALSE,TRUE,17,18,51,2,FALSE,TRUE,FALSE,TRUE,0,19,2
josevalim,"There is no need to generate routes for both PUT and PATCH. We could read the config in 1) and generate just one of the routes;",FALSE,TRUE,26,18,53,4,FALSE,TRUE,FALSE,TRUE,0,19,3
josevalim,"config.default_method_for_update should be uncommented in new applications as we already changed all docs",FALSE,TRUE,13,18,54,5,FALSE,FALSE,TRUE,TRUE,0,19,4
josevalim,"Typo: should be = :patch.",FALSE,TRUE,5,19,55,0,FALSE,TRUE,TRUE,TRUE,0,20,1
fxn,"@stevegraham I have found a crystal clear and authoritative answer to whether PUT allows partial updates: The very RFC 5789 (http://tools.ietf.org/html/rfc5789) states that  A new method is necessary to improve interoperability and prevent errors.  The PUT method is already defined to overwrite a resource with a complete new body, and cannot be reused to do partial changes. ",FALSE,TRUE,58,20,57,1,FALSE,TRUE,FALSE,TRUE,0,21,1
NZKoz,"I like the idea of moving this to be config.action_view.default_method_for_update as it lets people who care about these things choose to use patch without hitting anyone with 2x route proliferation.",FALSE,FALSE,30,21,59,1,FALSE,TRUE,FALSE,TRUE,0,22,1
NZKoz,"However I'm pretty strongly opposed to switching the default to PATCH just because of a neurotic interpretation of the RFC.  There are people with blog posts, printed books and screen casts where they do",FALSE,FALSE,35,21,61,3,FALSE,TRUE,FALSE,TRUE,0,22,2
NZKoz,"Switching the default will make all of those tutorials and chunks of code fail with routing errors, and  the RFC says X  doesn't seem like anywhere near a good enough reason to do that.",FALSE,FALSE,34,21,64,6,FALSE,TRUE,FALSE,TRUE,0,22,3
NZKoz,"Maybe for a 4.0 change but absent some genuine bug or difficulty we can't do this in a random minor release.",FALSE,FALSE,21,21,65,7,FALSE,FALSE,FALSE,TRUE,0,22,4
steveklabnik,"Maybe for a 4.0 change but absent some genuine bug or difficulty we can't do this in a random minor release.",FALSE,TRUE,21,22,66,0,FALSE,TRUE,FALSE,TRUE,0,23,1
steveklabnik,"Yeah, sure, I mean, the asset pipeline from 3.0 -> 3.1 was a waaaaaaay smaller change. ;)",FALSE,TRUE,17,22,67,1,FALSE,TRUE,FALSE,TRUE,0,23,2
steveklabnik,"of a neurotic interpretation of the RFC",FALSE,TRUE,7,22,68,2,FALSE,TRUE,FALSE,TRUE,0,23,3
steveklabnik,"This is not neurotic. It's simply following the way that things are supposed to work. Many more people want partial updates than an upsert, that's what PATCH is.",FALSE,TRUE,28,22,70,4,FALSE,TRUE,FALSE,TRUE,0,23,4
jeremy,"@dlee see my previous comment for a concrete example",FALSE,TRUE,9,23,71,0,FALSE,FALSE,FALSE,TRUE,0,24,1
dlee,"@jeremey I was actually responding to your first comment in this thread. You say that explicit put overrides would break apps, but I don't see how they would. Can you clarify what you mean by put overrides?",FALSE,TRUE,37,24,73,1,TRUE,TRUE,FALSE,TRUE,0,25,1
dlee,"@jeremy not @jeremey",FALSE,TRUE,3,25,74,0,TRUE,FALSE,FALSE,TRUE,0,26,1
jeremy,"@dlee Declare a resource in config/routes. Declare a put route that overrides the resource's update. Now upgrade the app and enable PATCH. Oops, now your forms submit to patch and your put route override is bypassed.",FALSE,TRUE,36,26,75,0,FALSE,TRUE,FALSE,TRUE,0,27,1
jeremy,"Not the end of the world, and docs should be enough to cover that.",FALSE,TRUE,14,26,76,1,FALSE,FALSE,TRUE,TRUE,0,27,2
dlee,"@jeremy One of the points of the change was:",FALSE,TRUE,9,27,77,0,TRUE,TRUE,FALSE,TRUE,0,28,1
dlee,"changes default form helpers to prefer :patch instead of :put for updates only for new apps",FALSE,TRUE,16,27,78,1,TRUE,FALSE,FALSE,TRUE,0,28,2
dlee,"Note that form helpers use :patch only for new apps. Would this still not cover that case?",FALSE,TRUE,17,27,80,3,TRUE,TRUE,FALSE,TRUE,0,28,3
getconor,"I agree with @NZKoz that this should not be included before 4.0 at the earliest. Unless I'm mistaken, RFC-5789 is still just a proposed standard, and it can still be changed or retracted. See: http://www.rfc-editor.org/info/rfc5789",FALSE,FALSE,35,28,82,1,FALSE,TRUE,TRUE,TRUE,0,29,1
getconor,"@steveklabnik This isn't the way things are supposed  to work yet, and even without all of the recent changes, we should only implement the standard when we know it won't change or be retracted- to do otherwise would be irresponsible. PATCH has been discussed by the IETF for almost ten years, why the rush to implement it in Rails now?",FALSE,FALSE,61,28,84,3,FALSE,TRUE,TRUE,TRUE,0,29,2
josevalim,"Good point. Agreed @nzkoz.",FALSE,TRUE,4,29,85,0,FALSE,TRUE,FALSE,TRUE,0,30,1
benatkin,"@mhutchin Interesting. I looked back at the link I posted at the top of the discussion and the RFC @dlee cited, which contains PATCH, appears to be obsoleted by one that I cited, which only has a reference to PATCH at the end. Here are the two documents:",FALSE,TRUE,48,30,86,0,FALSE,TRUE,FALSE,TRUE,0,31,1
benatkin,"RFC 2068: Hypertext Transfer Protocol -- HTTP/1.1 - Contains PATCH in the main body. January 1997.",FALSE,TRUE,16,30,87,1,FALSE,TRUE,FALSE,TRUE,0,31,2
benatkin,"RFC 2616: Hypertext Transfer Protocol -- HTTP/1.1 - Has a reference patch at the end (only Ctrl-F result for PATCH in the text version). June 1999. Says Obsoletes: 2068 at the top.",FALSE,TRUE,32,30,88,2,FALSE,TRUE,FALSE,TRUE,0,31,3
benatkin,"The reference to PATCH at the end says:",FALSE,TRUE,8,30,89,3,FALSE,TRUE,FALSE,TRUE,0,31,4
benatkin,"The PATCH, LINK, UNLINK methods were defined but not commonly implemented in previous versions of this specification. See RFC 2068 [33].",FALSE,TRUE,21,30,90,4,FALSE,TRUE,FALSE,TRUE,0,31,5
getconor,"@benatkin Thanks, I knew they had been discussing it for a long time, I underestimated how long. :-)",FALSE,FALSE,18,31,91,0,FALSE,TRUE,FALSE,TRUE,0,32,1
getconor,"I would only point out for those interested that RFC-2616 for HTTP/1.1 is now a DRAFT STANDARD, but at least it is further along in the process than the RFC that now covers PATCH, RFC-5789, which is a PROPOSED STANDARD, the  entry-level maturity for the standards track . For the meaning of the statuses see: http://www.rfc-editor.org/rfc/rfc2026.txt",FALSE,FALSE,55,31,92,1,FALSE,TRUE,FALSE,TRUE,0,32,2
benatkin,"Probably not the best way to check this, but on this list RFC-2616 is on Draft Standards and RFC-5789 is on Proposed Standards.",FALSE,TRUE,23,32,93,0,FALSE,TRUE,FALSE,TRUE,0,33,1
benatkin,"@mhutchin I didn't see your most recent comment until I posted mine. You said exactly the same thing! It took me a bit of thinking to see that there's a big difference between draft and proposed besides draft being higher up the list, but I can see it now.",FALSE,TRUE,49,33,95,0,FALSE,TRUE,FALSE,TRUE,0,34,1
dlee,"@NZKoz I don't think the  route proliferation  is so bad. In fact, even if Rails ends up supporting PATCH in the distant future, I'd prefer PUT be left as a standard route, perhaps linked to a different action (replace/upsert/etc.) This might not jive with a must-map-to-CRUD mindset, but it definitely jives with HTTP.",FALSE,TRUE,53,34,97,1,TRUE,TRUE,FALSE,TRUE,0,35,1
dlee,"The interpretation of the RFC is not neurotic; I think we all share a clear and straightforward interpretation. I'll assume you meant  neurotic adherence to the RFC .",FALSE,TRUE,27,34,98,2,TRUE,TRUE,FALSE,TRUE,0,35,2
dlee,"If so, let me reiterate that supporting PATCH is not to merely adhere to an RFC. The reason is because Rails currently has broken support for HTTP as commonly understood--leading to potentially problematic interoperability with RESTful clients, caching mechanisms, and proxies.",FALSE,TRUE,41,34,100,4,TRUE,TRUE,FALSE,TRUE,0,35,3
dlee,"I'd say implementing, documenting, and promoting a broken implementation of an HTTP VERB is a genuine bug, warranting a fix in a minor release, but I'll leave the decision up to the Rails core team.",FALSE,TRUE,35,34,101,5,TRUE,TRUE,FALSE,TRUE,0,35,4
dlee,"Finally, Rails shouldn't inhibit change just to retain backwards compatibility with blogs, books, and screencasts. In fact, I don't think Rails ever did care about that.",FALSE,TRUE,26,34,103,7,TRUE,TRUE,TRUE,TRUE,0,35,5
dlee,"@mhutchin, @benatkin, the Draft Standard is actually going away: http://www.rfc-editor.org/rfc/rfc6410.txt. RFCs currently in Draft Standard status will either be promoted to Internet Standard or demoted to Proposed Standard.",FALSE,TRUE,28,35,104,0,TRUE,TRUE,FALSE,TRUE,0,36,1
dlee,"BTW, Rails supports modern cookies and content-disposition headers which are also Proposed Standards, so there's no basis to reject PATCH just because it's a Proposed Standard.",FALSE,TRUE,26,35,106,2,TRUE,TRUE,FALSE,TRUE,0,36,2
dlee,"In fact, Rails should be the framework that helps PATCH attain the Internet Standard status since Rails clearly needs PATCH in order to support non-replacing updates.",FALSE,TRUE,26,35,107,3,TRUE,TRUE,TRUE,TRUE,0,36,3
dlee,"Whether that happens in 4.0 or 3.2, I defer to the Rails core team.",FALSE,TRUE,14,35,108,4,TRUE,TRUE,FALSE,TRUE,0,36,4
josevalim,"@NZKoz I don't think the  route proliferation  is so bad. In fact, even if Rails ends up supporting PATCH in the distant future, I'd prefer PUT be left as a standard route, perhaps linked to a different action (replace/upsert/etc.) This might not jive with a must-map-to-CRUD mindset, but it definitely jives with HTTP.",FALSE,TRUE,53,36,109,0,FALSE,TRUE,FALSE,TRUE,0,37,1
josevalim,"If @tenderlove says an extra route is almost free, I am +1 for including all routes, but I doubt this is the case. Remember some apps have more hundreds of resources routes. In the past, generating the format route proved to be quite expensive (for example).",FALSE,TRUE,46,36,111,2,FALSE,TRUE,FALSE,TRUE,0,37,2
josevalim,"If so, let me reiterate that supporting PATCH is not to merely adhere to an RFC. The reason is because Rails currently has broken support for HTTP as commonly understood--leading to potentially problematic interoperability with RESTful clients, caching mechanisms, and proxies.",FALSE,TRUE,41,36,112,3,FALSE,TRUE,FALSE,TRUE,0,37,3
josevalim,"Do you have anything to support this? PATCH is a new verb in the specs, so I doubt proxies and caching mechanisms went crazy to support it and change PUT behavior.",FALSE,TRUE,31,36,114,5,FALSE,TRUE,FALSE,TRUE,0,37,4
josevalim,"Finally, Rails shouldn't inhibit change just to retain backwards compatibility with blogs, books, and screencasts. In fact, I don't think Rails ever did care about that.",FALSE,TRUE,26,36,115,6,FALSE,TRUE,TRUE,TRUE,0,37,5
josevalim,"Yes, we should and we do care about that (we always consider it when doing big changes. If one of us forgets, other is there to remember). It is funny how everyone complains when Rails breaks backwards compatibility when moving from 3.0 to 3.1 but no one cares to ensure it. It is not just documentation that would be broken, but generators, engines and everything else. As I said in other ticket, each plugin checking for request.put? would now be broken in an app using PATCH as default.",FALSE,TRUE,88,36,117,8,FALSE,TRUE,TRUE,TRUE,0,37,6
josevalim,"In other words, +1 for this pull but leaving PUT as default to allow the community to catch up. Also, +1 if we can avoid routes proliferation.",FALSE,TRUE,27,36,118,9,FALSE,TRUE,FALSE,TRUE,0,37,7
dlee,"If so, let me reiterate that supporting PATCH is not to merely adhere to an RFC. The reason is because Rails currently has broken support for HTTP as commonly understood--leading to potentially problematic interoperability with RESTful clients, caching mechanisms, and proxies.",FALSE,TRUE,41,37,119,0,TRUE,TRUE,FALSE,TRUE,0,38,1
dlee,"Do you have anything to support this? PATCH is a new verb in the specs, so I doubt proxies and caching mechanisms went crazy to support it and change PUT behavior.",FALSE,TRUE,31,37,120,1,TRUE,TRUE,FALSE,TRUE,0,38,2
dlee,"I was referring to the broken behavior of PUT in Rails, not the absence of PATCH.",FALSE,TRUE,16,37,121,2,TRUE,TRUE,FALSE,TRUE,0,38,3
dlee,"For example, caches can reasonably assume that if I PUT { a  =>  b } to a resource, then that's what it should return on a GET. However, if the original resource was { c  =>  d }, Rails would by convention make the resource { a  =>  b ,  c  =>  d }, not the expected { a  =>  b }.",FALSE,TRUE,53,37,122,3,TRUE,TRUE,TRUE,TRUE,0,38,4
dlee,"BTW, how did you reply to a comment? Or did you just insert  >  before each line?",FALSE,TRUE,17,37,123,4,TRUE,TRUE,FALSE,TRUE,0,38,5
fxn,"I am also +1 on leaving PUT by default by now.",FALSE,TRUE,11,38,125,1,FALSE,TRUE,FALSE,TRUE,0,39,1
fxn,"3.0 -> 3.1 had significant changes, like the asset pipeline or switchto jQuery, but this change in routing seems both significant and kindof subtle as far as code is concerned, so I personally lean on playingsafe for a minor release.",FALSE,TRUE,40,38,126,2,FALSE,TRUE,FALSE,TRUE,0,39,2
fxn,"I think conforming to the RFCs is our duty, Rails has always been agood web citizen and promotes good practices by design, so we have tosupport PATCH and encourage proper usage of PUT within reasonable reallife constraints.",FALSE,TRUE,37,38,128,4,FALSE,TRUE,FALSE,TRUE,0,39,3
fxn,"Since PATCH is not required to carry strict partial updates, I thinkPATCH is going to make PUT obsolete for updates, just always PATCH.That could be 4.0.",FALSE,TRUE,26,38,130,6,FALSE,TRUE,FALSE,TRUE,0,39,4
getconor,"@mhutchin, @benatkin, the Draft Standard is actually going away: http://www.rfc-editor.org/rfc/rfc6410.txt. RFCs currently in Draft Standard status will either be promoted to Internet Standard or demoted to Proposed Standard.",FALSE,FALSE,28,39,131,0,FALSE,TRUE,FALSE,TRUE,0,40,1
getconor,"To be clear, this would only alter the status of RFC-2616 for HTTP/1.1, which isn't under discussion, in no more than two years. RFC-5789 for PATCH, and the Proposed Standard tier, are unchanged.",FALSE,FALSE,33,39,132,1,FALSE,TRUE,FALSE,TRUE,0,40,2
getconor,"BTW, Rails supports modern cookies and content-disposition headers which are also Proposed Standards, so there's no basis to reject PATCH just because it's a Proposed Standard.",FALSE,FALSE,26,39,133,2,FALSE,TRUE,FALSE,TRUE,0,40,3
getconor,"No, but it shouldn't be used as a selling point either.",FALSE,FALSE,11,39,134,3,FALSE,FALSE,TRUE,TRUE,0,40,4
getconor,"I'm not saying that we should reject PATCH just because it is only a Proposed Standard. I do think that we need to be very clear though, since people started saying that this was to conform to the RFCs, that the RFC in question is only a Proposed Standard, and has been for a long time. The status of the RFC dramatically impacts the cost-benefit analysis. Most would readily agree that Rails should do just about anything to conform to relevant Internet Standards and that those should be the defaults, but we obviously can't and shouldn't conform to every Proposed Standard.",FALSE,FALSE,101,39,135,4,FALSE,TRUE,TRUE,TRUE,0,40,5
getconor,"This should be evaluated without regard to the RFC.",FALSE,FALSE,9,39,136,5,FALSE,TRUE,TRUE,TRUE,0,40,6
getconor,"In fact, Rails should be the framework that helps PATCH attain the Internet Standard status since Rails clearly needs PATCH in order to support non-replacing updates.",FALSE,FALSE,26,39,137,6,FALSE,TRUE,TRUE,TRUE,0,40,7
getconor,"If we can do so with minimal disruption.",FALSE,FALSE,8,39,138,7,FALSE,FALSE,FALSE,TRUE,0,40,8
josevalim,"I was referring to the broken behavior of PUT in Rails, not the absence of PATCH.",FALSE,TRUE,16,40,139,0,FALSE,TRUE,FALSE,TRUE,0,41,1
josevalim,"For example, caches can reasonably assume that if I PUT { a  =>  b } to a resource, then that's what it should return on a GET. However, if the original resource was { c  =>  d }, Rails would by convention make the resource { a  =>  b ,  c  =>  d }, not the expected { a  =>  b }.",FALSE,TRUE,53,40,140,1,FALSE,TRUE,TRUE,TRUE,0,41,2
josevalim,"My point is that I don't believe nobody actually relies on that. And I don't believe anybody will soon just because there is a PATCH verb now.",FALSE,TRUE,27,40,141,2,FALSE,TRUE,FALSE,TRUE,0,41,3
josevalim,"BTW, how did you reply to a comment? Or did you just insert  >  before each line?",FALSE,TRUE,17,40,142,3,FALSE,TRUE,FALSE,TRUE,0,41,4
josevalim,"I just replied through gmail and it seems GH did its magic.",FALSE,TRUE,12,40,143,4,FALSE,TRUE,FALSE,TRUE,0,41,5
benatkin,"Note also that RFC-2616 has Roy Fielding and Tim Berners-Lee among the names, while RFC-5789 only has two names, not including those two, on it. Even if it had the same status (Draft Standard), it wouldn't carry quite the same weight to me unless I saw an endorsement from Roy Fielding. The obsolete standard, 2068, doesn't count.",FALSE,TRUE,57,41,144,0,FALSE,TRUE,FALSE,TRUE,0,42,1
benatkin,"Here's the first thing I found while searching for a new comment by Roy Fielding on PATCH:",FALSE,TRUE,17,41,145,1,FALSE,TRUE,FALSE,TRUE,0,42,2
benatkin,"PATCH is another option that, once it is sufficiently deployed, might be preferred over POST for sub-resource updates. However, we make these choices for a principled reason, not just because it seems RESTful. Ultimately, the methods should be chosen by the origin server and communicated somehow to the client via the media type or relationship processing rules. If the choice of method doesn’t make any difference to the other components (i.e., neither client nor intermediaries gain any value by using PUT or PATCH over POST), then we should admit that it just doesn’t matter to the architectural style.",FALSE,TRUE,98,41,146,2,FALSE,TRUE,TRUE,TRUE,0,42,3
benatkin,"So it sounds like we can be pretty RESTful without PATCH, and especially without PATCH as the default.",FALSE,TRUE,18,41,148,4,FALSE,TRUE,FALSE,TRUE,0,42,4
fxn,"I was referring to the broken behavior of PUT in Rails, not the absence of PATCH.",FALSE,TRUE,16,42,149,0,FALSE,TRUE,FALSE,TRUE,0,43,1
fxn,"About this point, in what sense is Rails behavior broken? Rails does what is in its hands to let you use PUT in an easy way, even imitating the correct way of doing things in browsers where that's not possible.",FALSE,TRUE,40,42,151,2,FALSE,TRUE,FALSE,TRUE,0,43,2
fxn,"The user is responsible for using those tools correctly. You are free to define as many ad-hoc resources as you want to speak proper HTTP. If you construct forms for partial updates and use update_attributes that's up to you.",FALSE,TRUE,39,42,152,3,FALSE,TRUE,FALSE,TRUE,0,43,3
stevegraham,"Deleted original comment because replying from email borked my formatting :(",FALSE,TRUE,11,43,153,0,FALSE,TRUE,FALSE,TRUE,0,44,1
stevegraham,"@stevegrahamI have found a crystal clear and authoritative answer to whether PUT allows partial updates: The very RFC 5789 (http://tools.ietf.org/html/rfc5789) states that  A new method is necessary to improve interoperability and prevent errors. The PUT method is already defined to overwrite a resource with a complete new body, and cannot be reused to do partial changes. ",FALSE,TRUE,56,43,154,1,FALSE,TRUE,FALSE,TRUE,0,44,2
stevegraham,"@fxn - I'm sorry I think you're mistaken here and I have to respectfully disagree with you. First of all RFC5789 is not HTTP, let's instead look at RFC2616",FALSE,TRUE,29,43,155,2,FALSE,TRUE,FALSE,TRUE,0,44,3
stevegraham," The PUT method requests that the enclosed entity be stored under the supplied Request-URI. If the Request-URI refers to an already existing resource, the enclosed entity SHOULD be considered as a modified version of the one residing on the origin server. If the Request-URI does not point to an existing resource, and that URI is capable of being defined as a new resource by the requesting user agent, the origin server can create the resource with that URI. ",FALSE,TRUE,78,43,156,3,FALSE,TRUE,FALSE,TRUE,0,44,4
stevegraham,"The word replace does not appear at all, in fact if you continue to read on you see  HTTP/1.1 does not define how a PUT method affects the state of an origin server.  This implies to me that there server is free to choose whether to replace the resource in it's entirety or apply the enclosed entity as a patch. It's as clear as day as far as HTTP 1.1 is concerned and putting aside my view own personal views, neither of these outcomes are incorrect.",FALSE,TRUE,86,43,157,4,FALSE,TRUE,FALSE,TRUE,0,44,5
stevegraham,"I think the only reason RFC5789 exists is that the authors have misinterpreted RFC2616. There is simply no language in RFC2616 that mandates  The existing HTTP PUT method only allow a complete replacement of a document.  or that  The PUT method is already defined to overwrite a resource with a complete new body, and cannot be reused to do partial changes.  It's simply not there. There maybe an argument that  a new method is necessary to improve interoperability and prevent errors.  I don't know.",FALSE,TRUE,84,43,159,6,FALSE,TRUE,FALSE,TRUE,0,44,6
stevegraham,"I also don't see how PUT breaks caching? As far as I understand it a successful PUT invalidates the caches for that given URI but the request response itself is not allowed to be cached as per HTTP 1.1. Maybe someone would be kind enough to explain that for me.",FALSE,TRUE,50,43,161,8,FALSE,TRUE,FALSE,TRUE,0,44,7
stevegraham,"Having said all of the above, it would be nice if someone could actually refute my point to my satisfaction, which you have not done so far. It's not very comfortable being the only dissenting voice.",FALSE,TRUE,36,43,162,9,FALSE,TRUE,FALSE,TRUE,0,44,8
fxn,"@stevegraham I agree with you in that the authors of the RFC5789 could be wrong, though I want to believe that you wouldn't be able to push such a proposal for so many time like they have done based on such a gross false premise. But yes, that's an hypothesis.",FALSE,TRUE,50,44,163,0,FALSE,TRUE,FALSE,TRUE,0,45,1
fxn,"I was for a while in rest-discuss and my feeling is that there's consensus about that interpretation of PUT. Also O'Reilly's book about REST is clear. What's a modified version of the resource? Resources in HTTP are not partial, they are resources, all or nothing, in my understanding of the terminology. You can only request and submit resources or resource representations. So in that sense I believe no verb can work with partial resources. That's where ad-hoc resources come to play, like the paid flag of an invoice in my example above.",FALSE,TRUE,92,44,165,2,FALSE,TRUE,FALSE,TRUE,0,45,2
fxn,"But this thread is pulling in different directions. It's interesting. There's the objections about whether it is premature to support such a RFC because of its status. There's the objections about whether using PUT for partial updates is incorrect at all. There's the argument that Rails should be pioneer and push. Then there will be practical issues because web servers and proxies won't understand PATCH in the short term and we will only be able to tunnel it through POST.",FALSE,TRUE,80,44,166,3,FALSE,TRUE,TRUE,TRUE,0,45,3
fxn,"All in all, I've written to Roy Fielding to ask for advice. I think that's the best we can do. Should Rails work in that direction? If yes, should we work on it today? Let's see whether Roy is so kind as to shed some light about this.",FALSE,TRUE,48,44,167,4,FALSE,TRUE,TRUE,TRUE,0,45,4
benatkin,"@fxn I don't see where @stevegraham suggested that the authors of RFC-2616 are wrong. I only see where he suggested that the authors of RFC-5789 are wrong.",FALSE,TRUE,27,45,168,0,FALSE,TRUE,FALSE,TRUE,0,46,1
benatkin,"I think that it's great that you've contacted Roy Fielding. I hope to see an interesting reply.",FALSE,TRUE,17,45,169,1,FALSE,TRUE,FALSE,TRUE,0,46,2
benatkin,"I wonder why this couldn't have been implemented as a plugin this summer when this and other issues were being discussed. If one was written, would it have been used? How about releasing a plugin based on this and seeing whether it takes off?",FALSE,TRUE,44,45,171,3,FALSE,TRUE,FALSE,TRUE,0,46,3
fxn,"@benatkin oh yes my bad, wrong copy & paste. I've edited the comment.",FALSE,TRUE,13,46,172,0,FALSE,TRUE,FALSE,TRUE,0,47,1
NZKoz,"All this discussion of RFCs and the like seems to miss the point entirely.  What's the negative impact of the current behavior to real users. Are there actual practical things which people are being bitten by because we use PUT?",FALSE,TRUE,41,47,174,1,FALSE,TRUE,FALSE,TRUE,0,48,1
NZKoz,"Unless there's an answer to that then this entire thread is a massive distraction, we should add the config option, not change the defaults, and move on with our lives.",FALSE,TRUE,30,47,176,3,FALSE,TRUE,TRUE,TRUE,0,48,2
fxn,"The discussion in my view is relevant because there are people arguing that NO support for PATCH should be added at all.",FALSE,TRUE,22,48,177,0,FALSE,TRUE,TRUE,TRUE,0,49,1
fxn,"Arguments are: 1) it is too premature given the status of the RFC. 2) It is not clear in HTTP/1.1 that PATCH is needed at all. 3) Current web servers and proxies won't understand it, so this should add support only for tunneling.",FALSE,TRUE,43,48,179,2,FALSE,TRUE,TRUE,TRUE,0,49,2
fxn,"I am enumerating, not subscribing them.",FALSE,TRUE,6,48,180,3,FALSE,FALSE,FALSE,TRUE,0,49,3
fxn,"We need to answer that first question. I think the point about defaults is minor in the thread.",FALSE,TRUE,18,48,181,4,FALSE,TRUE,FALSE,TRUE,0,49,4
NZKoz,"Supporting it as an option, with no change of defaults, circumvents all 3 of those objections.  Those who wish to use it can, those who don't care won't be affected in any way.",FALSE,TRUE,34,49,183,1,FALSE,TRUE,FALSE,TRUE,0,50,1
NZKoz,"It's really the simplest solution that could possibly work and it won't break anyone's apps ever under any circumstances.  Unless there's a compelling reason to do something else, why don't we add the config option and move on.",FALSE,TRUE,39,49,184,2,FALSE,TRUE,FALSE,TRUE,0,50,2
benatkin,"Saying no and encouraging the proponents to write a plugin would be evensimpler. I would prefer this, as until I get a better explanation of itsvalue and an easier-to-understand RFC, I don't want this to be in the docs.I don't think that rails should side with a Proposed Standard that doesn'thave adoption from numerous web stack components (unlike the other proposedstandards @dlee cited, content-disposition and modern cookies) unlessthere's a strong benefit to a number of users.",FALSE,TRUE,76,50,186,1,FALSE,TRUE,TRUE,TRUE,0,51,1
benatkin,"If there are technical reasons why such a plugin wouldn't work well theycould be addressed and the changes would likely help with other pluginprojects as well. Furthermore, there would be a clear path forward todemonstrate the value of the PATCH behavior: integrate it with a cachingproxy and show how it improves things vs. not having PATCH.",FALSE,TRUE,56,50,187,2,FALSE,TRUE,FALSE,TRUE,0,51,2
benatkin,"On Wed, Nov 16, 2011 at 3:13 PM, Michael Koziarski <reply@reply.github.com",FALSE,TRUE,11,50,188,3,FALSE,TRUE,FALSE,TRUE,0,51,3
benatkin,"Supporting it as an option, with no change of defaults, circumvents all 3of those objections.  Those who wish to use it can, those who don't carewon't be affected in any way.",FALSE,TRUE,32,50,190,5,FALSE,TRUE,FALSE,TRUE,0,51,4
benatkin,"It's really the simplest solution that could possibly work and it won'tbreak anyone's apps ever under any circumstances.  Unless there's acompelling reason to do something else, why don't we add the config optionand move on.",FALSE,TRUE,36,50,191,6,FALSE,TRUE,FALSE,TRUE,0,51,5
benatkin,"Reply to this email directly or view it on GitHub:#505 (comment)",FALSE,TRUE,11,50,192,7,FALSE,TRUE,FALSE,TRUE,0,51,6
getconor,"Wait a minute. It was never my position that these changes are too premature given the status of the RFCs. The only reason I even mentioned the status of the RFCs was because they were being used in this thread, and the other threads mentioned, for various reasons, including trying to define the problem and justifying the changes, but without any mention of the fact that all of the RFCs mentioned were in various stages of maturity, and none of them were even final standards yet.",FALSE,FALSE,86,51,194,1,FALSE,TRUE,FALSE,TRUE,0,52,1
getconor,"Other than that, I couldn't care less. I agreed with @NZKoz then, and I agree with @NZKoz now.",FALSE,FALSE,18,51,195,2,FALSE,TRUE,FALSE,TRUE,0,52,2
fxn,"+1 to what Benjamin said. I don't think it is a good idea to push code, docs, and tests to maintain if the feature ends up being dubious. If people want to play with something experimental better a plugin than a black hole in the code base hidden by a flag to the end user.",FALSE,TRUE,55,52,197,1,FALSE,TRUE,FALSE,TRUE,0,53,1
fxn,"I mean, we are touching one of the strongest conventions in Rails, it touches the blessed actions. We have to do that with extra care in my view.",FALSE,TRUE,28,52,199,3,FALSE,TRUE,FALSE,TRUE,0,53,2
fxn,"If I had to bet, I'd say go, but I'd prefer to have a clear understanding of the convenience of pushing this from someone as Roy Fielding, given nobody in the thread AFAICT seems to have a definitive authoritative answer. Because pushing support for PATCH has implications, it sends a message to the user base. The guide and blog post need to explain to users when or why they should use PATCH, and from this thread we have no conclusions. A blog post saying  in case you want it, why? we don't really know, you just have it there, use at your risk, have fun  doesn't sound right to me.",FALSE,TRUE,110,52,200,4,FALSE,TRUE,TRUE,TRUE,0,53,3
fxn,"To summarize, it is even easier to go with the solution that says partial updates with PUT are OK. No changes needed.",FALSE,TRUE,22,53,202,1,FALSE,TRUE,FALSE,TRUE,0,54,1
rkh,"Partial updates with PUT violate RFC 2616. You have to use POST.",FALSE,FALSE,12,54,204,1,FALSE,TRUE,FALSE,TRUE,0,55,1
rkh,"I understand Section 9.6 as  if you send a PUT request, don't care if the resource already exist, the server will tell us with a 200 or a 201  (i.e. the client will transmit the complete resource), how should that allow a partial update?",FALSE,FALSE,44,56,207,1,FALSE,TRUE,TRUE,TRUE,0,57,1
fxn,"@rkh That's also what I think, but the point is  I understand , we always say in advance something like that,  my understanding ,  my interpretation , which is telling us we cannot derive without doubt that from the text in the RFC. So we need to resort to  which is the intention , or  which is the general consensus .",FALSE,TRUE,56,57,208,0,FALSE,TRUE,FALSE,TRUE,0,58,1
fxn,"Roy Fielding has not replied to my email so far.",FALSE,TRUE,10,57,209,1,FALSE,TRUE,FALSE,TRUE,0,58,2
fxn,"On the other hand @steveklabnik has some pointers that support that PATCH is needed for partial updates I'll post later.",FALSE,TRUE,20,57,210,2,FALSE,TRUE,FALSE,TRUE,0,58,3
steveklabnik,"For example, in the (now obsolete) RFC2068:",FALSE,TRUE,7,58,211,0,FALSE,TRUE,FALSE,TRUE,0,59,1
steveklabnik,"The PATCH method is similar to PUT except that the entity contains alist of differences between the original version of the resourceidentified by the Request-URI and the desired content of the resourceafter the PATCH action has been applied.",FALSE,TRUE,38,58,212,1,FALSE,TRUE,FALSE,TRUE,0,59,2
steveklabnik,"The definition of PUT:",FALSE,TRUE,4,58,213,2,FALSE,TRUE,FALSE,TRUE,0,59,3
steveklabnik,"The PUT method requests that the enclosed entity be stored under thesupplied Request-URI. If the Request-URI refers to an alreadyexisting resource, the enclosed entity SHOULD be considered as amodified version of the one residing on the origin server.",FALSE,TRUE,38,58,214,3,FALSE,TRUE,FALSE,TRUE,0,59,4
steveklabnik,"The enclosed entity be stored. Not 'some random stuff that changes things.' It's an entire entity. 'a modified version of the one,' not 'changes that should update the one.'",FALSE,TRUE,29,58,215,4,FALSE,TRUE,TRUE,TRUE,0,59,5
steveklabnik,"@fxn has the links I gave earlier, where Fielding also explicitly says PUT requires an entire representation. I don't have them handy.",FALSE,TRUE,22,58,216,5,FALSE,TRUE,FALSE,TRUE,0,59,6
stevegraham,"Please post these links because if they're the same ones I have seen Fielding does not say anything of the sort.",FALSE,TRUE,21,59,217,0,FALSE,TRUE,FALSE,TRUE,0,60,1
rkh,"He's quoting RFCs, not Fielding. This is not about implementing REST properly, this is about implementing HTTP properly.",FALSE,TRUE,18,60,219,1,FALSE,TRUE,FALSE,TRUE,0,61,1
rkh,"On Dec 14, 2011, at 21:07 , Stevie Graham wrote:",FALSE,TRUE,10,60,220,2,FALSE,TRUE,FALSE,TRUE,0,61,2
rkh,"Please post these links because if they're the same ones I have seen Fielding does not say anything of the sort.",FALSE,TRUE,21,60,221,3,FALSE,TRUE,FALSE,TRUE,0,61,3
rkh,"Reply to this email directly or view it on GitHub:#505 (comment)",FALSE,TRUE,11,60,222,4,FALSE,TRUE,FALSE,TRUE,0,61,4
benatkin,"@steveklabnik As you say RFC2068 has been obsoleted by RFC2616. http://tools.ietf.org/html/rfc2068",FALSE,TRUE,11,61,223,0,FALSE,TRUE,FALSE,TRUE,0,62,1
benatkin,"RFC2616, a draft standard, doesn't include a definition of PATCH. All it has to say is The PATCH, LINK, UNLINK methods were defined but not commonly implemented in previous versions of this specification. See RFC 2068 [33]. To me this doesn't say that PATCH is a part of HTTP 1.1. Also the proposed standard for PATCH (not a draft standard) doesn't include any of the authors of RFC2616 in its list of authors, and I couldn't find any endorsement for RFC5789 from Fielding online.",FALSE,TRUE,84,61,225,2,FALSE,TRUE,FALSE,TRUE,0,62,2
benatkin,"So PATCH feels pretty random to me. Much more random than semantically replacing a document with an updated version but leaving created_at, updated_at, and id intact, and maybe omitting some unchanged fields for efficiency.",FALSE,TRUE,34,61,227,4,FALSE,TRUE,FALSE,TRUE,0,62,3
rkh,"On Dec 14, 2011, at 21:26 , Benjamin Atkin wrote:",FALSE,TRUE,10,62,228,0,FALSE,TRUE,FALSE,TRUE,0,63,1
rkh,"@steveklabnik As you say RFC2068 has been obsoleted by RFC2616. http://tools.ietf.org/html/rfc2068",FALSE,TRUE,11,62,229,1,FALSE,TRUE,FALSE,TRUE,0,63,2
rkh,"But it got basically valid again by http://tools.ietf.org/html/rfc5789",FALSE,TRUE,8,62,230,2,FALSE,FALSE,FALSE,TRUE,0,63,3
rkh,"RFC2616, a draft standard, doesn't include a definition of PATCH. All it has to say is The PATCH, LINK, UNLINK methods were defined but not commonly implemented in previous versions of this specification. See RFC 2068 [33]. To me this doesn't say that PATCH is a part of HTTP 1.1. Also the proposed standard for PATCH (not a draft standard) doesn't include any of the authors of RFC2616 in its list of authors, and I couldn't find any support for RFC5789 from Fielding online.",FALSE,TRUE,84,62,231,3,FALSE,TRUE,FALSE,TRUE,0,63,4
rkh,"So PATCH feels pretty random to me. Much more random than semantically replacing a document with an updated version but leaving created_at, updated_at, and id intact, and maybe omitting some unchanged fields for efficiency.",FALSE,TRUE,34,62,232,4,FALSE,TRUE,FALSE,TRUE,0,63,5
rkh,"Reply to this email directly or view it on GitHub:#505 (comment)",FALSE,TRUE,11,62,233,5,FALSE,TRUE,FALSE,TRUE,0,63,6
stevegraham,"@rkh NOPE NOPE NOPE",FALSE,TRUE,4,63,234,0,FALSE,TRUE,FALSE,TRUE,0,64,1
benatkin,"RFC5789 is nearly two years old, is still a proposed standard, and I can't find any implementations of a write-through cache with it, nor can I find evidence of the two authors trying to push it forward since then.",FALSE,TRUE,39,64,235,0,FALSE,TRUE,FALSE,TRUE,0,65,1
benatkin,"I would be happy to see a rails plugin and an apache or nginx module written to show how it can improve how HTTP works, and then a better discussion about whether the complexity of adding another verb is needed could take place. I think headers might be better because to me whether something is being replaced or just modified isn't a yes/no question when metadata is considered.",FALSE,TRUE,68,64,237,2,FALSE,TRUE,FALSE,TRUE,0,65,2
steveklabnik,"Here's one quote from Fielding:",FALSE,TRUE,5,65,238,0,FALSE,TRUE,FALSE,TRUE,0,66,1
steveklabnik,"Stefan, I think it is better to say that we only use PUT when the update action is idempotent and the representation is complete.",FALSE,TRUE,24,65,239,1,FALSE,TRUE,FALSE,TRUE,0,66,2
steveklabnik,"He goes on further to mention PATCH:",FALSE,TRUE,7,65,240,2,FALSE,TRUE,FALSE,TRUE,0,66,3
steveklabnik,"PATCH is another option that, once it is sufficiently deployed, might be preferred over POST for sub-resource updates. However, we make these choices for a principled reason, not just because it seems RESTful.",FALSE,TRUE,33,65,241,3,FALSE,TRUE,FALSE,TRUE,0,66,4
steveklabnik,"In the text of that post:",FALSE,TRUE,6,65,242,4,FALSE,FALSE,FALSE,TRUE,0,66,5
steveklabnik,"... complete replacement of a representation (PUT),",FALSE,TRUE,7,65,243,5,FALSE,FALSE,FALSE,TRUE,0,66,6
steveklabnik,"The text of the PATCH RFC, which is again, just a draft:",FALSE,TRUE,12,65,244,6,FALSE,TRUE,FALSE,TRUE,0,66,7
steveklabnik,"The PUT method is already defined to overwrite a resourcewith a complete new body, and cannot be reused to do partial changes.",FALSE,TRUE,22,65,245,7,FALSE,TRUE,FALSE,TRUE,0,66,8
steveklabnik,"My point is this: there's overwhelming consensus that PUT means 'whole representation.' Well, modified consensus, since it's not 100%. ;) However, it is true that PATCH is a draft standard, so I can see not implementing it in Rails. That's quite valid. However, continuing to use PUT is also wrong. If it's a partial update, POST makes much more sense.",FALSE,TRUE,60,65,247,9,FALSE,TRUE,FALSE,TRUE,0,66,9
steveklabnik,"So PATCH feels pretty random to me. Much more random than semantically replacing a document with an updated version but leaving created_at, updated_at, and id intact, and maybe omitting some unchanged fields for efficiency.",FALSE,TRUE,34,66,249,1,FALSE,TRUE,FALSE,TRUE,0,67,1
steveklabnik,"No, not at all. That's a direct violation of PUT's semantics. POST is the random grab-bag method, anyway.",FALSE,TRUE,18,66,250,2,FALSE,TRUE,FALSE,TRUE,0,67,2
rkh,"On Dec 14, 2011, at 21:54 , Benjamin Atkin wrote:",FALSE,TRUE,10,67,251,0,FALSE,TRUE,FALSE,TRUE,0,68,1
rkh,"RFC5789 is nearly two years old, is still a proposed standard, and I can't find any implementations of a write-through cache with it, nor can I find evidence of the two authors trying to push it forward since then.",FALSE,TRUE,39,67,252,1,FALSE,TRUE,FALSE,TRUE,0,68,2
rkh,"You mean Rails should not support proposed standards like, say, Cookies?",FALSE,TRUE,11,67,254,3,FALSE,TRUE,TRUE,TRUE,0,68,3
rkh,"Reply to this email directly or view it on GitHub:#505 (comment)",FALSE,TRUE,11,67,256,5,FALSE,TRUE,FALSE,TRUE,0,68,4
benatkin,"Not because it's a proposed standard, no. But there are other reasons to support cookies: it's been implemented and experimented with in dozens of server, client, and middleware implementations long before the first version of Ruby On Rails came out, and it's a feature that's important to Ruby On Rails users.",FALSE,TRUE,51,68,258,1,FALSE,TRUE,FALSE,TRUE,0,69,1
mikekelly,"fwiw, I brought this up on SO about 18 months ago (the answer was auto-accepted):",FALSE,FALSE,15,69,259,0,FALSE,TRUE,FALSE,TRUE,0,70,1
NZKoz,"We've gone back and forth on this for more than 6 months, there has never been a single case provided why we should change the defaults other than bible, sorry RFC, thumping.",FALSE,TRUE,32,70,261,0,FALSE,TRUE,TRUE,TRUE,0,71,1
NZKoz,"As I mentioned earlier, we should simply add an option for users who want to use PATCH to be able to use it, and move on with our lives.  We can address the defaults in some far distant release once we actually have real experience with the benefits.",FALSE,TRUE,49,70,263,2,FALSE,TRUE,TRUE,TRUE,0,71,2
NZKoz,"In the interest of bringing this to a close I'm going to close this pull request, please feel free to submit another which only adds a configuration option allowing users to switch on PATCH",FALSE,TRUE,34,70,264,3,FALSE,TRUE,FALSE,TRUE,0,71,3
dlee,"Would rails core accept the minimal PATCH commit? I don't want to work on the pull request just to have it debated for months and closed without resolution.",FALSE,TRUE,28,71,265,0,TRUE,TRUE,FALSE,TRUE,0,72,1
fxn,"RFCs are the tool we have to discuss this. Why don't we support MOVE in Rails. Well, because it is not in the RFC right? And if someone proposed MOVE we wouldn't accept it on the ground of not being there.",FALSE,TRUE,41,72,267,1,FALSE,TRUE,FALSE,TRUE,0,73,1
fxn,"So let's accept this has to be discussed taking RFCs into account, and let's accept RFCs are not axiomatic systems and are subject to interpretation in some spots.",FALSE,TRUE,28,72,268,2,FALSE,TRUE,FALSE,TRUE,0,73,2
fxn,"Having said that, if verb V is not clearly justified I see no point in hiding it behind a flag, as I said above. If the need for verb V is debatable it should not be in core.",FALSE,TRUE,38,72,269,3,FALSE,TRUE,TRUE,TRUE,0,73,3
steveklabnik,"@NZKoz There are good reasons for this. I've cross-posted about this to rest-discuss, and as Jan Algermissen mentions,",FALSE,TRUE,18,73,270,0,FALSE,TRUE,FALSE,TRUE,0,74,1
steveklabnik,"When a client (or intermediary, for that matter) re-does a PUT N-times (e.g.because it did not receive any response the first N-1 times due to networkproblems) the result on the server might not be what the client assumes it is,given the idempotent nature of PUT.",FALSE,TRUE,45,73,271,1,FALSE,TRUE,FALSE,TRUE,0,74,2
steveklabnik,"A client that is aware of the server's tunneling-partial-update-through-PUTsemantics might not redo the PUT but any intermediary in between might (becausethey would not be aware of the out-of-band knowledge / just like Googleaccelerator in the case of GET-to-delete-account).",FALSE,TRUE,38,73,272,2,FALSE,TRUE,FALSE,TRUE,0,74,3
steveklabnik,"What is the problem of just using POST for the partial update in the firstplace? This is what POST is for.",FALSE,TRUE,21,73,273,3,FALSE,TRUE,FALSE,TRUE,0,74,4
steveklabnik,"Also, 'bible-thumping' is just a way to dismiss arguments; you either follow web standards or you don't. Rails has brought REST(ish) to many, many people, and the choices Rails makes are important. When IE6 didn't follow the standard initially, it was an excellent browser. Years later, we can see how that was a mistake.",FALSE,TRUE,54,73,275,5,FALSE,TRUE,FALSE,TRUE,0,74,5
steveklabnik,"I don't even mean this as 'let's implement PATCH,' as that's not yet a true standard. But update should really use POST by default, since most people aren't actually PUT-ing full representations.",FALSE,TRUE,32,73,277,7,FALSE,TRUE,TRUE,TRUE,0,74,6
searls,"@steveklabnik +1, well said.",FALSE,FALSE,4,74,278,0,FALSE,FALSE,FALSE,TRUE,0,75,1
mikekelly,"@steveklabnik that post from Jan is written on the basis that it is impossible to make an idempotent partial update. I disagree.",FALSE,FALSE,22,75,279,0,FALSE,TRUE,FALSE,TRUE,0,76,1
mikekelly,"In some ways it's irrelevant anyway; people are already using partial PUT requests that are intended as idempotent.",FALSE,FALSE,18,75,280,1,FALSE,TRUE,FALSE,TRUE,0,76,2
mikekelly,"Moving to POST would:",FALSE,FALSE,4,75,281,2,FALSE,TRUE,FALSE,TRUE,0,76,3
mikekelly,"have a negative impact on clients since its non-idempotent nature has now made the requests non-repeatable",FALSE,FALSE,16,75,283,4,FALSE,FALSE,FALSE,TRUE,0,76,4
mikekelly,"seem to produce zero appreciable benefits over the current practice",FALSE,FALSE,10,75,285,6,FALSE,FALSE,FALSE,TRUE,0,76,5
mikekelly,"Supposedly, RFC2616 has been enforcing 'full PUT' for over 12 years and we're still yet to see any significant mechanisms that leverage this systemic agreement on the fullness of PUT requests.. that should tell us something (i.e. it's a useless semantic). Add in the fact we have implementations, like Rails, which blatantly disregard it and don't appear to suffer any real negative consequences.. I think it's a serious stretch to compare this to IE6.",FALSE,FALSE,74,75,286,7,FALSE,TRUE,TRUE,TRUE,0,76,6
steveklabnik,"@mikekelly Honestly, if Rails devs knew what 'idempotent' meant, they'd be happy. I don't think they intend such things at all, I think they're just using the Rails defaults.",FALSE,TRUE,29,76,287,0,FALSE,TRUE,FALSE,TRUE,0,77,1
steveklabnik,"And if the semantics of PUT aren't useful, then they should be changed. In the spec for HTTP. And then we should follow it.",FALSE,TRUE,24,76,289,2,FALSE,TRUE,TRUE,TRUE,0,77,2
steveklabnik,"Agreements are useless if people don't actually follow them.",FALSE,TRUE,9,76,290,3,FALSE,FALSE,FALSE,TRUE,0,77,3
fxn,"Guys I am reopening this PR. There's a legitimate discussion going on here, and I was the guy that took this PR on his plate from day one.",FALSE,TRUE,28,77,291,0,FALSE,TRUE,FALSE,TRUE,0,78,1
fxn,"If the discussion takes 6 months or 2 years, it just doesn't matter, it has to take the time it needs.",FALSE,TRUE,21,77,292,1,FALSE,FALSE,FALSE,TRUE,0,78,2
fxn,"People tired of the thread can unsubscribe.",FALSE,TRUE,7,77,293,2,FALSE,FALSE,FALSE,TRUE,0,78,3
steveklabnik,"Two more things, while I think of it:",FALSE,TRUE,8,78,294,0,FALSE,TRUE,FALSE,TRUE,0,79,1
steveklabnik,"if PUT didn't require a full representation, there'd be no way to do the 'or create' part of PUT's semantics. While not totally damning, I think it's also a strong supporting line of reasoning.",FALSE,TRUE,34,78,296,2,FALSE,TRUE,FALSE,TRUE,0,79,2
steveklabnik,"Rails hasn't suffered for 'implementing PUT wrong' (really app dev's fault, but assisted by Rails' shoddy defaults) because Rails apps haven't been receiving PUT requests: they receive POST requests with a _method parameter saying PUT. This is basically exactly what I'm saying should happen with the removal of support for PATCH but without the extra parameter, pretending to be a PUT.",FALSE,TRUE,61,78,298,4,FALSE,TRUE,TRUE,TRUE,0,79,3
NZKoz,"I certainly don't agree with continuing the discussion, but as you say I can click the little  off  button :)",FALSE,TRUE,20,79,299,0,FALSE,TRUE,FALSE,TRUE,0,80,1
NZKoz,"My objection is solely to switching the default without any actual downside to end users.  It's not about whether someone's app will break (which we can obviously work around) but about yet-more additional conceptual overhead for users picking up rails.  There's tonnes of books, screencasts and blog posts which show how RESTful routing works and they all say  put will update .",FALSE,TRUE,63,79,301,2,FALSE,TRUE,FALSE,TRUE,0,80,2
NZKoz,"Users will read those blog posts or books, write :method=>:put in their html and get routing errors.",FALSE,TRUE,17,79,302,3,FALSE,FALSE,FALSE,TRUE,0,80,3
NZKoz,"We can't just do that for the sake of feeling better about our purity.  I'd suggest we really need a web-accelerator level of pain to justify changing the defaults.",FALSE,TRUE,30,79,303,4,FALSE,TRUE,FALSE,TRUE,0,80,4
NZKoz,"Have fun guys ;)",FALSE,TRUE,4,79,304,5,FALSE,FALSE,FALSE,TRUE,0,80,5
myronmarston,"Supposedly, RFC2616 has been enforcing 'full PUT' for over 12 years and we're still yet to see any significant mechanisms that leverage this systemic agreement on the fullness of PUT requests.. that should tell us something (i.e. it's a useless semantic). Add in the fact we have implementations, like Rails, which blatantly disregard it and don't appear to suffer any real negative consequences.. I think it's a serious stretch to compare this to IE6.",FALSE,FALSE,74,80,305,0,FALSE,TRUE,TRUE,TRUE,0,81,1
myronmarston,"@mikekelly: I don't think it's a matter of  real negative consequences ; rather, there are very, very positive benefits to implementing PUT correctly that are simply impossible to achieve when the server is not following proper PUT semantics.  I've got a recent internal HTTP service that I built with sinatra and it was very easy to get proper PUT semantics.  The app uses PUT both for create and update, and only allows full representations to be used.  Here are some of the benefits we've received:",FALSE,FALSE,87,80,307,2,FALSE,TRUE,FALSE,TRUE,0,81,2
myronmarston,"Since PUTs are idempotent, they can be re-tried as many times as you want. We rely on this a lot. The service is consumed by our main rails app. The rails app performs the PUT to the sinatra service using a resque job, and it's very easy to retry the job when we have a transient failure. It just works.",FALSE,FALSE,60,80,309,4,FALSE,TRUE,FALSE,TRUE,0,81,3
myronmarston,"The fact that we use PUT for both create and update makes the client code exceptionally simple. We don't need to deal with two separate types of requests to ensure the sinatra service has the resource in the proper state. We just use a PUT, and it doesn't matter if the resource exists or not, or whether or not the resource is already in the desired state; the end result is the same.  We also leverage this in a cron job that runs every few days for the express purpose of reconciling any discrepancies between the user configuration data in the rails app and the data in the sinatra app.  It goes over every user, does a GET to the sinatra app to get the data, compares the data to what it has locally, and does a PUT if there is a discrepancy or if the sinatra app responds with 404 not found.  Again, the idempotent, create-or-update nature of the PUT makes this extremely easy.",FALSE,FALSE,168,80,311,6,FALSE,TRUE,FALSE,TRUE,0,81,4
myronmarston,"The fact that we use PUT for create (and thus allow the client to pick the identifier) makes the service very transparent and easy to troubleshoot.  When one of the users of the rails app has some missing data I don't have to go look up the id of the corresponding record in the sinatra service; I can easily construct URLs directly in my browser using the user ID I already know.",FALSE,FALSE,73,80,313,8,FALSE,TRUE,FALSE,TRUE,0,81,5
myronmarston,"None of these benefits would be possible if we had implemented the normal rails PUT semantics in our sinatra service.",FALSE,FALSE,20,80,314,9,FALSE,TRUE,FALSE,TRUE,0,81,6
myronmarston,"So here's my two cents (not that anyone asked for it....).  I'd love to see rails provide support to easily implement proper PUT semantics.  As part of this, some other HTTP verb should be used for partial updates. PATCH looks interesting, but POST can be used today and is the correct verb to use.  In addition, it would be great if ActiveRecord/ActiveModel provided an replace_attributes method that only supported FULL updates and no partial updates.  It would effectively be like update_attributes except that it would set any unmentioned attributes to nil.  Most of the time, this would cause the partial update to fail with validation errors, which is the correct behavior you would usually want.",FALSE,FALSE,120,80,316,11,FALSE,TRUE,TRUE,TRUE,0,81,7
mikekelly,"@myronmarston right, this is a common approach e.g. Riak uses it",FALSE,TRUE,11,81,317,0,FALSE,TRUE,FALSE,TRUE,0,82,1
mikekelly,"The issue here is that your application doesn't rely on completeness being guaranteed for PUT across the web; it's an over-specification of HTTP. If your application does need full PUT (many do), then design and document it that way. I agree it's a good idea to try and make this behaviour easier to achieve in rails.",FALSE,TRUE,56,81,319,2,FALSE,TRUE,FALSE,TRUE,0,82,2
mikekelly,"Given we now have a lot of mobile clients with unreliable connectivity - allowing them by default to submit small, partial updates idempotently is a huge benefit. Neither POST or PATCH would allow this since they are non-idempotent.",FALSE,TRUE,38,81,321,4,FALSE,TRUE,FALSE,TRUE,0,82,3
steveklabnik,"allowing them by default to submit small, partial updates idempotently is a huge benefit.",FALSE,TRUE,14,82,322,0,FALSE,FALSE,FALSE,TRUE,0,83,1
steveklabnik,"What's your issue with the 'expose a sub-resource' strategy?",FALSE,TRUE,9,82,324,2,FALSE,TRUE,FALSE,TRUE,0,83,2
mikekelly,"What's your issue with the 'expose a sub-resource' strategy?",FALSE,TRUE,9,83,325,0,FALSE,TRUE,FALSE,TRUE,0,84,1
mikekelly,"off the top of my head:",FALSE,TRUE,6,83,326,1,FALSE,FALSE,FALSE,TRUE,0,84,2
mikekelly,"splitting up every potential partial into individual resources is not practical if you want to be able to partially update each individual attribute of a resource.",FALSE,TRUE,26,83,328,3,FALSE,FALSE,FALSE,TRUE,0,84,3
mikekelly,"it's much more efficient to put (oh snap!) this optimisation in the hands of the clients, rather than try and second guess what they want.",FALSE,TRUE,25,83,330,5,FALSE,FALSE,FALSE,TRUE,0,84,4
mikekelly,"smearing your resource state is a pain for things like caching; it's redundant, you introduce shared state between resources which cases problems with cache invalidation, etc etc",FALSE,TRUE,27,83,332,7,FALSE,FALSE,FALSE,TRUE,0,84,5
mikekelly,"having said that, I do favour using sub-resource strategy based around deletion, which does tend to overlap somewhat. There are also ways to get around the third point about caching, but at a cost of increased complexity to your system.",FALSE,TRUE,40,83,334,9,FALSE,TRUE,FALSE,TRUE,0,84,6
myronmarston,"The issue here is that your application doesn't rely on completeness being guaranteed for PUT across the web; it's an over-specification of HTTP. If your application does need full PUT (many do), then design and document it that way. I agree it's a good idea to try and make this behaviour easier to achieve in rails.",FALSE,TRUE,56,84,335,0,FALSE,TRUE,FALSE,TRUE,0,85,1
myronmarston,"Actually, my application does rely on it being the complete resource.  That's how it implements PIT as create or update.  It wouldn't be able to implement create if it allowed partial resources.",FALSE,TRUE,34,84,337,2,FALSE,TRUE,FALSE,TRUE,0,85,2
myronmarston,"Given we now have a lot of mobile clients with unreliable connectivity - allowing them by default to submit small, partial updates idempotently is a huge benefit. Neither POST or PATCH would allow this since they are non-idempotent.",FALSE,TRUE,38,84,338,3,FALSE,TRUE,FALSE,TRUE,0,85,3
myronmarston,"The spec does not mandate that POST or PATCH be idempotent--but it doesn't say they can't be.  I think it makes sense to implement the partial update as an idempotent POST or PATCH and simply document that it is idempotent (even though the HTTP verb used does not require it).",FALSE,TRUE,51,84,340,5,FALSE,TRUE,FALSE,TRUE,0,85,4
myronmarston,"Also, while it's possible to implement some kinds of partial updates idempotently, it's not universally true that ALL partial updates are idempotent.  Consider the common case of using accepts_nested_attributes_for for a has_many association.  When an update comes in that is adding new associated records, it is not idempotent, because each time the update runs it will add additional records.",FALSE,TRUE,61,84,342,7,FALSE,TRUE,FALSE,TRUE,0,85,5
fxn,"On Fri, Dec 16, 2011 at 5:37 PM, Myron Marstonreply@reply.github.comwrote:",FALSE,TRUE,10,85,343,0,FALSE,TRUE,FALSE,TRUE,0,86,1
fxn,"The issue here is that your application doesn't rely on completeness being guaranteed for PUT across the web; it's an over-specification of HTTP. If your application does need full PUT (many do), then design and document it that way. I agree it's a good idea to try and make this behaviour easier to achieve in rails.",FALSE,TRUE,56,85,344,1,FALSE,TRUE,FALSE,TRUE,0,86,2
fxn,"Actually, my application does rely on it being the complete resource.  That's how it implements PIT as create or update.  It wouldn't be able to implement create if it allowed partial resources.",FALSE,TRUE,32,85,345,2,FALSE,TRUE,FALSE,TRUE,0,86,3
fxn,"Why not?",FALSE,TRUE,2,85,346,3,FALSE,FALSE,FALSE,TRUE,0,86,4
fxn,"I think there's a corner case that involves validation. If I send therepresentation of a sub-resource (to avoid the word  update ) with PUTI could create the corresponding part of the resource itself.",FALSE,TRUE,32,85,347,4,FALSE,TRUE,FALSE,TRUE,0,86,5
fxn,"For example, I set the  paid  flag of an invoice to  true , and ifthere are no validations that is idempotent and makes sense as far asHTTP is concerned. It is idempotent if I can create an invoice withthat single attribute, because that PUT request consistently sets theflag to true. What happens to the rest of the resource among requestsis irrelevant.",FALSE,TRUE,60,85,348,5,FALSE,TRUE,FALSE,TRUE,0,86,6
fxn,"We are talking about the protocol, not about whether that makes sensefor a particular application.",FALSE,TRUE,15,85,350,7,FALSE,TRUE,FALSE,TRUE,0,86,7
fxn,"But if the server refuses to create the invoice because a customer ismandatory, and accepts the very same request 2 minutes later becausesomeone else created the invoice... I would not call those PUT callsidempotent, the side-effects of the request are clearly different.",FALSE,TRUE,42,85,351,8,FALSE,TRUE,FALSE,TRUE,0,86,8
fxn,"Well, that could happen also for full requests... Indeed, regarding idempotence the spec says  (aside from errors or expiration issues) . So idempotence is defined for successful requests I interpret.",FALSE,TRUE,29,86,352,0,FALSE,TRUE,FALSE,TRUE,0,87,1
fxn,"If that is correct, then I see no problem in allowing creation of sub-resources.",FALSE,TRUE,14,86,353,1,FALSE,TRUE,FALSE,TRUE,0,87,2
fxn,"@myronmarston then, why do you think partial updates would not allow you to use PUT for creation and update?",FALSE,TRUE,19,86,355,3,FALSE,TRUE,FALSE,TRUE,0,87,3
myronmarston,"@myronmarston then, why do you think partial updates would not allow you to use PUT for creation and update?",FALSE,TRUE,19,87,356,0,FALSE,TRUE,FALSE,TRUE,0,88,1
myronmarston,"It's possible, but it adds lots of complexity.  With how I've implemented PUT, the client assumes no knowledge of what state the resource is in on the server.  It simply doesn't matter.  It always PUTs the entire resource.",FALSE,TRUE,41,87,358,2,FALSE,TRUE,FALSE,TRUE,0,88,2
myronmarston,"Likewise, the server doesn't need to know if the request body is intended to be a partial or full representation; it uniformly treats it as a complete resource.",FALSE,TRUE,28,87,360,4,FALSE,TRUE,FALSE,TRUE,0,88,3
myronmarston,"It makes for simpler, more maintainable code all around.",FALSE,TRUE,9,87,362,6,FALSE,TRUE,FALSE,TRUE,0,88,4
fxn,"@myronmarston excellent, thanks.",FALSE,TRUE,3,88,363,0,FALSE,FALSE,FALSE,TRUE,0,89,1
fxn,"So in your case the application is designed that way. Metaphorically speaking, in my invoicing applications the paid flag is an ordinary resource from the client's point of view. It is convenient, better for the semantics of the applications, we like the model, etc.",FALSE,TRUE,44,88,364,1,FALSE,TRUE,FALSE,TRUE,0,89,2
fxn,"But if we focus the conversation on the raw protocol, the more I read about it, the less I am convinced that HTTP requires full representation in PUT requests.",FALSE,TRUE,29,88,365,2,FALSE,TRUE,FALSE,TRUE,0,89,3
fxn,"However, Roy Fielding has stated that is the intention in a few public places. @steveklabnik quoted him, and I've also seen this patch http://trac.tools.ietf.org/wg/httpbis/trac/changeset/1158#file1 Roy points to in this thread http://tech.groups.yahoo.com/group/rest-discuss/message/17415 (@mikekelly participated in that one).",FALSE,TRUE,36,88,366,3,FALSE,TRUE,FALSE,TRUE,0,89,4
fxn,"So, my personal take on this is: the HTTP spec is a bit ambiguous about partial updates via PUT. This opens the door to endless controversy because it does not follow from the spec crystal clear that you cannot do it. But Roy Fielding says you should send full representations. If you want an authoritative answer, Roy's the one. Thus, if Rails as a framework has to take sides, I think the most sensible choice is agreeing that partial updates via PUT are not the way to go.",FALSE,TRUE,88,88,368,5,FALSE,TRUE,TRUE,TRUE,0,89,5
fxn,"That does not mean the path to address that in Rails is to support PATCH, but at least I believe we have a sensible conclusion about this.",FALSE,TRUE,27,88,369,6,FALSE,TRUE,FALSE,TRUE,0,89,6
fxn,"Does anybody disagree?",FALSE,TRUE,3,88,370,7,FALSE,FALSE,FALSE,TRUE,0,89,7
dlee,"@fxn I agree PUT should not be used for partial updates.",FALSE,TRUE,11,89,371,0,TRUE,TRUE,TRUE,TRUE,0,90,1
dlee,"PATCH sounds like the perfect solution for this (in fact, designed specifically for this purpose). Other than backwards compatibility issues (which we can avoid by making PATCH optional) and lacking the stamp of RFC Internet Standard (which wasn't an issue for cookies and content-disposition), what reasons are there for not using PATCH?",FALSE,TRUE,52,89,373,2,TRUE,TRUE,FALSE,TRUE,0,90,2
steveklabnik,"Oh, also, some clarification from a changeset authored by fielding 9 months ago in the upcoming changes to the spec.",FALSE,TRUE,20,90,374,0,FALSE,TRUE,FALSE,TRUE,0,91,1
steveklabnik,"An origin server SHOULD reject any PUT request that contains a Content-Range header field, since it might be misinterpreted as partial content (or might be partial content that is being mistakenly PUT as a full representation). Partial content updates are possible by targeting a separately identified resource with state that overlaps a portion of the larger resource, or by using a different method that has been specifically defined for partial updates (for example, the PATCH method defined in RFC5789).",FALSE,TRUE,79,90,375,1,FALSE,TRUE,FALSE,TRUE,0,91,2
mikekelly,"personally I think it's better to ignore the specifications and focus on the practical problems inflicted by using PUT for partial updates - what are they?",FALSE,TRUE,26,91,377,1,FALSE,TRUE,FALSE,TRUE,0,92,1
reschke,"@dlee  lacking the stamp of RFC Internet Standard ",FALSE,FALSE,8,92,378,0,FALSE,TRUE,FALSE,TRUE,0,93,1
reschke,"How exactly are PATCH (RFC 5789), Content-Disposition (RFC 6266) or Cookies (RFC 6265)  lacking the stamp of RFC Internet Standard ?",FALSE,FALSE,20,92,380,2,FALSE,TRUE,FALSE,TRUE,0,93,2
dlee,"@mikekelly The practical problems stem precisely from not following specifications. It's as if your server did an update on a GET, or a delete on a PUT--you're breaking conventions/expectations. HTTP participants expect certain behavior following specifications, and breaking that expectation will lead to troubles.",FALSE,TRUE,44,93,382,1,TRUE,TRUE,FALSE,TRUE,0,94,1
fxn,"@mikekelly I think there are two ways to look at it.",FALSE,TRUE,11,94,383,0,FALSE,TRUE,FALSE,TRUE,0,95,1
fxn,"One way is the pragmatic choice one does for a particular application. People can do whatever they want. You can use GET for deletion, you can tunnel everything trough POST. You can submit partial updates through PUT... Individual programmers for particular projects decide to adhere to the spec or not and in what degree.",FALSE,TRUE,54,94,385,2,FALSE,TRUE,FALSE,TRUE,0,95,2
fxn,"The other point of view is the one of a web framework. In my view it is the duty of Rails to follow and promote best practices. When designing the framework, specs are what we need to base the design on, they are what define what's a good web citizen.",FALSE,TRUE,50,94,387,4,FALSE,TRUE,FALSE,TRUE,0,95,3
fxn,"If you are writing your own private links manager running in localhost, and you want to delete links with GET quick & dirty, please go ahead. But Rails should push the message you should be using DELETE. By design, the easy path does that. And it does going as far as having builtin macros, routing, conventions, and even tunneling the method through a hack while at the same time routing the verb correctly (BTW, someone said people do POSTs with _method really not PUTs anyway. No, browsers do POSTs, Rails routes PUT).",FALSE,TRUE,92,94,389,6,FALSE,TRUE,TRUE,TRUE,0,95,4
fxn,"This PUT vs PATCH is no different. Though we need to take into account backwards compatibility, I think it is our responsibility to give the user the tools to do partial updates in a proper way.",FALSE,TRUE,36,94,390,7,FALSE,TRUE,FALSE,TRUE,0,95,5
mikekelly,"@dlee @fxn what is this unexpected behaviour exactly?",FALSE,TRUE,8,95,392,1,FALSE,FALSE,FALSE,TRUE,0,96,1
mikekelly,"Is it that a client might make a PUT request intended to 'shrink' a resource but instead only partially updates it as a partial? If so; is that a real problem? Aren't client devs reading documentation telling them what can be PUT where anyway?",FALSE,TRUE,44,95,394,3,FALSE,TRUE,FALSE,TRUE,0,96,2
dlee,"@reschke #505 (comment)",FALSE,TRUE,3,96,395,0,TRUE,FALSE,FALSE,TRUE,0,97,1
dlee,"@mikekelly What you're describing is one of the problems. Another could be that a PUT request could be cached with a partial representation. Still another is that a client might assume the idempotent properties of PUT.",FALSE,TRUE,36,96,397,2,TRUE,TRUE,FALSE,TRUE,0,97,2
mikekelly,"@dlee it's not practical to prime a cache with the contents of a PUT request - do you know of implementations which actually do this? The client is meant assume the idempotent properties of PUT, so that's not really a problem either.",FALSE,TRUE,42,97,399,1,FALSE,TRUE,FALSE,TRUE,0,98,1
exviva,"Let's agree that for vast majority of Rails applications, a  partial update  (a.k.a. update_attributes) is the most common use-case for an update-like request. Just imagine having to re-submit full representations of large/complex resources on every update (like nested attributes or file attachments).",FALSE,FALSE,42,98,401,1,FALSE,TRUE,FALSE,TRUE,0,99,1
exviva,"Having said that, I'd vote for routing PATCH to the update action, and coming up with a separate action with PUT semantics (create/update full representations) in Rails 4.",FALSE,FALSE,28,98,403,3,FALSE,TRUE,FALSE,TRUE,0,99,2
reschke,"@dlee I'm aware of that.",FALSE,TRUE,5,99,404,0,FALSE,TRUE,FALSE,TRUE,0,100,1
reschke,"I'm just confused about  lacking the stamp of RFC Internet Standard . PATCH, Cookies, and C-D are Proposed Standards. HTTP/1.1 currently is  a draft standard, but will be back at  proposed  soonish. As a matter of fact, most of the internet runs on  proposed  standards.",FALSE,TRUE,45,99,406,2,FALSE,TRUE,FALSE,TRUE,0,100,2
dlee,"@mikekelly No, I don't know of any implementations off the top of my head. As for idempotent PUTs, the problem is precisely that clients assume the idempotent properties of PUT, but the server might not do idempotent updates in PUT.",FALSE,TRUE,40,100,408,1,TRUE,TRUE,FALSE,TRUE,0,101,1
dlee,"@exviva I agree. But I think there should be some sort of transitional stage in 3.x that introduces devs to PATCH and allows them to opt-in before Rails 4.",FALSE,TRUE,29,100,409,2,TRUE,TRUE,TRUE,TRUE,0,101,2
mikekelly,"@dlee ok, but what does the invalid use of PUT for non-idempotent requests have to do with the use of idempotent partial updates? Are you implying that idempotent partial updates aren't possible?",FALSE,TRUE,32,101,411,1,FALSE,TRUE,FALSE,TRUE,0,102,1
dlee,"@mikekelly Sorry, I don't understand why you're talking about  idempotent partial updates . My worry is with non-idempotent partial updates happening behind a PUT request (expected to be idempotent).",FALSE,TRUE,28,102,412,0,TRUE,TRUE,FALSE,TRUE,0,103,1
fxn,"@mikekelly If you document you can delete a resource via POST requests, that's your business. Users of your API can certainly read that documentation and understand it.",FALSE,TRUE,27,103,413,0,FALSE,TRUE,FALSE,TRUE,0,104,1
fxn,"If you allow idempotent partial updates via PUT requests also that's your business. Users of your API can read that documentation and understand it.",FALSE,TRUE,24,103,414,1,FALSE,TRUE,FALSE,TRUE,0,104,2
fxn,"But If you are a Rails programmer and want to provide DELETE for deletion and PUT for full updates the framework provides the means[*]. As of today there's no builtin way to do partial updates, because there's no builtin way in HTTP. This thread is about whether Rails as a framework should do something about this, not about the practical urgency you may feel. People have done delete via POST for ages.",FALSE,TRUE,72,103,416,3,FALSE,TRUE,TRUE,TRUE,0,104,3
fxn,"[*] The current idioms with update_attributes are perfectly fine for full representations via PUT.  Full representation  belongs to your interface, update_attributes is your implementation. If your API requires a full representation (except perhaps for some internal stuff like cache counts), update_attributes allows you to store one just fine.",FALSE,TRUE,48,103,417,4,FALSE,TRUE,FALSE,TRUE,0,104,4
mikekelly,"As of today there's no builtin way to do partial updates, because there's no builtin way in HTTP",FALSE,TRUE,18,104,419,1,FALSE,TRUE,FALSE,TRUE,0,105,1
mikekelly,"it's already built into rails and works ok over HTTP, afaict:",FALSE,TRUE,11,104,421,3,FALSE,TRUE,FALSE,TRUE,0,105,2
mikekelly,"curl -H  Accept: application/json  http://test.dev/widgets/1",FALSE,TRUE,5,104,422,4,FALSE,FALSE,FALSE,TRUE,0,105,3
mikekelly,"{ id :1, foo : bar ,  fizz :  buzz ,  car :  blue  }",FALSE,TRUE,6,104,423,5,FALSE,FALSE,FALSE,TRUE,0,105,4
mikekelly,"curl -H  Content-Type: application/json  -X PUT -d  { \ foo\ : \ partially updated\  }  http://test.dev/widgets/1",FALSE,TRUE,13,104,424,6,FALSE,TRUE,FALSE,TRUE,0,105,5
mikekelly,"curl -H  Accept: application/json  http://test.dev/widgets/1",FALSE,TRUE,5,104,425,7,FALSE,FALSE,FALSE,TRUE,0,105,6
mikekelly,"{ id :1, foo : partially updated ,  fizz :  buzz ,  car :  blue  }",FALSE,TRUE,7,104,426,8,FALSE,FALSE,FALSE,TRUE,0,105,7
steveklabnik,"Sure, and so does GET /foos/1&action=delete to delete a resource, but that doesn't mean you're not violating HTTP's semantics to do it.",FALSE,TRUE,22,105,428,1,FALSE,TRUE,FALSE,TRUE,0,106,1
mikekelly,"@steveklabnik most people agree that 2616 is not clear enough for this to be a serious issue, hence why httpbis has looked to improve it. I'm yet to figure out why exactly that semantic needs to be put in place by httpbis. It doesn't appear to be necessary and it prevents partial idempotent updates (PIUs).",FALSE,TRUE,55,106,430,1,FALSE,TRUE,FALSE,TRUE,0,107,1
mikekelly,"PIUs are important, particularly for mobile devices that operate on crappy networks and need to be able to make extremely granular requests (i.e. partials) that can be retried easily on failure (i.e. idempotently).",FALSE,TRUE,33,106,433,4,FALSE,TRUE,FALSE,TRUE,0,107,2
mikekelly,"The fact is, rails behaves this way - it's demonstrably useful, and non-demonstrably detrimental to either rails applications or the web as a whole.",FALSE,TRUE,24,106,434,5,FALSE,FALSE,FALSE,TRUE,0,107,3
mikekelly,"I think it's probably better to leave it as it is - given the contention over 2616 - and wait to see what happens with httpbis.",FALSE,TRUE,26,106,437,8,FALSE,FALSE,FALSE,TRUE,0,107,4
dlee,"@mikekelly I think 2616 is clear enough on the issue of PUT being full-resource replacements, but just in case it wasn't clear enough, there's also the RFC 5789 to make it explicitly clear.",FALSE,TRUE,33,107,439,1,TRUE,TRUE,FALSE,TRUE,0,108,1
dlee,"PIUs, and just partial updates in general, are important, we all agree. That's the whole point of this pull request--let's support the proposed standard of using PATCH to do partial updates.",FALSE,TRUE,31,107,441,3,TRUE,TRUE,FALSE,TRUE,0,108,2
dlee,"PUT mandates idempotent full (non-partial) updates.PATCH allows full or partial updates, idempotent or not.",FALSE,TRUE,14,107,442,4,TRUE,FALSE,FALSE,TRUE,0,108,3
dlee,"@reschke Yes, a lot of the internet runs on Proposed Standards. That's why we shouldn't dismiss PATCH even though it's a Proposed Standard, because it's too restrictive to only support Internet Standard.",FALSE,TRUE,32,107,443,5,TRUE,TRUE,TRUE,TRUE,0,108,4
mikekelly,"@dlee I don't want to argue semantics because it won't go anywhere, but would you agree there must've be some ambiguity that causes it to need updating by httpbis?",FALSE,TRUE,29,108,445,1,FALSE,TRUE,FALSE,TRUE,0,109,1
mikekelly,"The problem with moving to PATCH is that it's not equivalent since its definition is not idempotent:  PATCH is neither safe nor idempotent , this means that - on the web - these requests cannot be considered idempotent (even if your client and server know better). This means that any supporting infrastructure e.g. HTTP client libraries which know they can retry PUT requests on network failure, or generic accelerating proxies that perform a similar function cannot do so on these PATCH requests - even if they are intended idempotently, on the network they aren't.",FALSE,TRUE,93,108,447,3,FALSE,TRUE,FALSE,TRUE,0,109,2
mikekelly,"Fwiw, that kind of argument does not hold up in the same way for the guaranteed fullness of a PUT request, which is exactly my problem with that (over)specification.",FALSE,TRUE,29,108,448,4,FALSE,TRUE,FALSE,TRUE,0,109,3
dlee,"@mikekelly From what I can tell, it's clear that PUT means full-resource updates, and the purpose of RFC 5789 (PATCH) is not mainly to clarify PUT's definition (it does clarify, if only by taking for granted that PUT is full-resource replacement), but to provide a solution for a glaring hole in HTTP--namely, the lack of partial updates.",FALSE,TRUE,57,109,450,1,TRUE,TRUE,FALSE,TRUE,0,110,1
dlee,"I agree with you that PATCH does not guarantee idempotent updates. I agree with you it might be useful to have a verb that allows partial and idempotent updates. However, PUT is not it (no partial updates). Neither is PATCH (updates not guaranteed to be idempotent). There is no verb in HTTP that guarantees idempotent behavior while allowing partial updates.",FALSE,TRUE,60,109,452,3,TRUE,TRUE,FALSE,TRUE,0,110,2
dlee,"Your desire for such a verb should not prevent PATCH from being supported in Rails. As for idempotent partial updates, it seems like using subresources (as discussed in previous comments) is the best strategy for now.",FALSE,TRUE,36,109,454,5,TRUE,TRUE,TRUE,TRUE,0,110,3
dlee,"After all this, though, it seems we're pretty much on the same page. I think you'd agree it would be good to support PATCH in Rails if it's clear that PUT does not allow partial updates. Our task, then, is to ascertain whether or not PUT supports partial updates. And between RFCs (new and old) and Roy Fielding, it seems pretty clear the authorities are against partial updates in PUT. Can we agree on this?",FALSE,TRUE,75,109,456,7,TRUE,TRUE,FALSE,TRUE,0,110,4
fxn,"(With infinite love to @tenderlove).",FALSE,TRUE,5,110,457,0,FALSE,FALSE,FALSE,TRUE,0,111,1
fxn,"@mikekelly Ruby on Rails does not define HTTP semantics, as a web framework it has to provide means to its users to be able to adhere to them if they want to, promote proper usage of them, and still allow users to do delete via GET and partial updates via PUT (ie, promoting, not lecturing).",FALSE,TRUE,55,110,459,2,FALSE,TRUE,FALSE,TRUE,0,111,2
fxn,"Today, to toggle the paid flag of an invoice and follow proper HTTP semantics, you have to make that flag a resource. That's for me a conclusion of this thread, based on quotes from Roy Fielding.",FALSE,TRUE,36,110,460,3,FALSE,TRUE,FALSE,TRUE,0,111,3
fxn,"So the topic of the thread is: given these definitions, what should Rails do next? Perhaps the answer is PATCH, or perhaps is nothing, we still don't know.",FALSE,TRUE,28,110,462,5,FALSE,TRUE,TRUE,TRUE,0,111,4
fxn,"And if Rails had some sort of support for PATCH, you still would not be able to do idempotent partial updates and adhere to HTTP semantics at the same time. That's just how things are defined, it's not under the control of Rails. To discuss the convenience of this you need to discuss with the HTTP guys, not the Rails guys.",FALSE,TRUE,61,110,464,7,FALSE,TRUE,FALSE,TRUE,0,111,5
mikekelly,"@fxn the problem here is that you're insisting that your interpretation of the semantics in 2616 is the only valid one, which is not the case. Debating semantics is utterly pointless, but it is worth acknowledging that this particular discussion about PUT has been around for lot longer than this PR - which suggests that there is, in fact, more than one valid interpretation.",FALSE,TRUE,64,111,466,1,FALSE,TRUE,FALSE,TRUE,0,112,1
mikekelly,"So even if  we must follow the spec at all costs  was a valid logical argument - in this instance it doesn't really move us forward due to the unavoidable reality that part of the spec in question is up to interpretation.",FALSE,TRUE,42,111,467,2,FALSE,FALSE,FALSE,TRUE,0,112,2
mikekelly,"So, as I've said previously in this thread, I think we're far better off focusing on the actual benefits and problems of moving away from or staying with partial idempotent updates. I've already made a case for sticking with what we have:",FALSE,TRUE,42,111,469,4,FALSE,TRUE,FALSE,TRUE,0,112,3
mikekelly,"PIUs are important, particularly for mobile devices that operate on crappy networks and need to be able to make extremely granular requests (i.e. partials) that can be retried easily on failure (i.e. idempotently).",FALSE,TRUE,33,111,470,5,FALSE,FALSE,FALSE,TRUE,0,112,4
mikekelly,"The fact is, rails behaves this way - it's demonstrably useful, and non-demonstrably detrimental to either rails applications or the web as a whole.",FALSE,TRUE,24,111,471,6,FALSE,FALSE,FALSE,TRUE,0,112,5
mikekelly,"I think it's probably better to leave it as it is - given the contention over 2616 - and wait to see what happens with httpbis.",FALSE,TRUE,26,111,472,7,FALSE,FALSE,FALSE,TRUE,0,112,6
mikekelly,"Aside from the concerns about following the spec, why do you think partial updates via PUT are bad for either rails apps or the web?",FALSE,TRUE,25,111,474,9,FALSE,TRUE,FALSE,TRUE,0,112,7
reschke,"@mikekelly you can make a PATCH request idempotent by adding  If-Match .",FALSE,TRUE,11,112,476,1,FALSE,TRUE,FALSE,TRUE,0,113,1
fxn,"@mikekelly I don't say this is the only valid interpretation. At the beginning of the thread it was my reading of the spec, and it was what other sources interpreted. It is also clear that we are not inventing this controversy, it is old.",FALSE,TRUE,44,113,477,0,FALSE,TRUE,FALSE,TRUE,0,114,1
fxn,"After this thread, we have a pulse of the generic consensus and Roy Fielding's view on this topic. And I believe that opinion is key. If Roy said  go do partial updates with PUT  we had already closed the PR.",FALSE,TRUE,40,113,478,1,FALSE,TRUE,FALSE,TRUE,0,114,2
fxn,"This tells me that if I have to bet, I know where to bet. Not saying the other interpretation is wrong. The spec is ambiguous, so there's no right or wrong. It could be the case that the ambiguity was an overlook, I personally don't know. But what we have is consensus (different from unanimity), and the +1 of Roy Fielding regarding not doing partial updates with PUT.",FALSE,TRUE,68,113,479,2,FALSE,TRUE,FALSE,TRUE,0,114,3
fxn,"So, Rails is (probably) going to provide a way for the majority of people participating in this thread that would like to do partial updates without PUT. At the same time, you will be able to continue doing partial updates via PUT.",FALSE,TRUE,42,113,480,3,FALSE,TRUE,FALSE,TRUE,0,114,4
fxn,"Mind you, if we do something I don't expect it to be a dramatic change. At least at the beginning. It could be something discreet, like being able to say :method => :patch, and adding routing and conventions without changing defaults. Backwards compatibility must be respected, and indeed you may be doing form_for with a full-representation, which is the canonical use case of form_for reused in create and update views.",FALSE,TRUE,70,113,481,4,FALSE,TRUE,FALSE,TRUE,0,114,5
fxn,"And yes, adhering to the spec/semantics is enough for me to consider adding support for this. Why does Rails support DELETE? Couldn't people delete via POST? Sure, and we are doing it all the time, but that's irrelevant, it is the duty of Rails to give you a way to do proper DELETE. When you work with polynomials you don't say  superscript , you say  exponent . And when people mean partial update, they are going to be able to say PATCH.",FALSE,TRUE,80,113,483,6,FALSE,TRUE,FALSE,TRUE,0,114,6
mikekelly,"@reschke is that an explicit part of PATCH in its latest incarnation? Of course - that approach would also prevent non-conditional PIUs, right?",FALSE,TRUE,23,114,485,1,FALSE,TRUE,FALSE,TRUE,0,115,1
mikekelly,"@fxn I'm definitely not keen on this change - it's unnecessary, more complex, and stands to invalidate existing standard rails practices. It's unnecessary because it doesn't actually appear to achieve very much other than to satisfy:",FALSE,TRUE,36,114,487,3,FALSE,TRUE,FALSE,TRUE,0,115,2
mikekelly,"a part of 2616 that doesn't even have to exist according to a valid interpretation",FALSE,TRUE,15,114,488,4,FALSE,FALSE,FALSE,TRUE,0,115,3
mikekelly,"Roy Fielding's proposed clarifications in an spec that's not been published yet",FALSE,TRUE,12,114,489,5,FALSE,TRUE,FALSE,TRUE,0,115,4
mikekelly,"we're going round in circles here and I have nothing to add at the moment, so I'm going to bow out for now",FALSE,TRUE,23,114,490,6,FALSE,TRUE,FALSE,TRUE,0,115,5
reschke,"@mikekelly this applies to any HTTP method; for PATCH, see http://greenbytes.de/tech/webdav/rfc5789.html#rfc.section.2.p.4",FALSE,TRUE,11,115,491,0,FALSE,TRUE,FALSE,TRUE,0,116,1
reschke,"re:  that's not been published yet  -- oh, it is published as Internet Draft, just not approved as RFC yet. Publication of Internet Drafts is for community review and gathering feedback. Hint, hint.",FALSE,TRUE,33,115,492,1,FALSE,TRUE,FALSE,TRUE,0,116,2
myronmarston,"@mikekelly -- Over and over gain you've pointed out that rails supports partial idempotent updates.  This is true, but update_attributes and the common idioms of rails (i.e. using accepts_nested_attributes_for) often result in a non-idempotent partial update.  Consider this params hash from the API docs:",FALSE,TRUE,46,116,494,1,FALSE,TRUE,FALSE,TRUE,0,117,1
myronmarston,"This is not idempotent, because every time the update_attributes processes this hash, it creates two new posts (one with the title  Kari, the awesome Ruby documentation browser! , one with the title  The egalitarian assumption of the modern citizen ).",FALSE,TRUE,38,116,495,2,FALSE,TRUE,FALSE,TRUE,0,117,2
myronmarston,"Thus the conventions and idioms that rails encourages developers to use result in non-idempotent PUTs. Putting aside the full vs. partial question for a second, the non-idempotency here is a big problem.",FALSE,TRUE,32,116,496,3,FALSE,TRUE,FALSE,TRUE,0,117,3
steveklabnik,"Fielding weighs in: http://tech.groups.yahoo.com/group/rest-discuss/message/18091",FALSE,TRUE,4,117,497,0,FALSE,TRUE,FALSE,TRUE,0,118,1
steveklabnik,"And Fielding with a non-snarky answer:",FALSE,TRUE,6,118,498,0,FALSE,TRUE,FALSE,TRUE,0,119,1
steveklabnik,"PUT means PUT. There are nopartial updates in PUT. There was a half-assed attempt to add thosesemantics by committee in the midst of standardizing HTTP, but thatattempt failed because PUT's existing semantics had already been deployedand we can't graft partial updates on top of existing replace semantics.Period. End of story. Hence, PATCH was defined in 1995 (and finallystandardized much later because the WebDAV group was lazy).",FALSE,TRUE,66,118,499,1,FALSE,TRUE,FALSE,TRUE,0,119,2
steveklabnik,"This answer is final. If anyone implements it differently in Rails,then Rails will be neither compliant with HTTP nor compliant with REST.Whether that matters to anyone developing Rails is besides the point.",FALSE,TRUE,32,118,500,2,FALSE,TRUE,FALSE,TRUE,0,119,3
steveklabnik,"Game over, man. Game over.",FALSE,TRUE,5,118,501,3,FALSE,TRUE,FALSE,TRUE,0,119,4
steveklabnik,"Now, to the question he addresses in his final paragraph: does this actually matter, to us? I obviously think it does.",FALSE,TRUE,21,118,502,4,FALSE,TRUE,FALSE,TRUE,0,119,5
fxn,"Case closed!",FALSE,TRUE,2,119,503,0,FALSE,TRUE,FALSE,TRUE,0,120,1
fxn,"Yes, it matters.",FALSE,TRUE,3,119,504,1,FALSE,FALSE,FALSE,TRUE,0,120,2
fxn,"We are about to release 3.2 RC, it's too late for 3.2, but I think the time it took to discuss this has been worthwhile because we didn't have such a clear and authoritative point of view at the beginning. Knowing which are the rules without doubt, we have the right mindset to work on the PR.",FALSE,TRUE,57,119,505,2,FALSE,TRUE,FALSE,TRUE,0,120,3
mikekelly,"please consider my response to that, and wait for the discussion to play out.",FALSE,TRUE,14,120,506,0,FALSE,FALSE,FALSE,TRUE,0,121,1
mikekelly,"obligatory meme:",FALSE,TRUE,2,120,507,1,FALSE,FALSE,FALSE,TRUE,0,121,2
mikekelly,"Roy is responsible for the changes in httpbis so it's hardly an earth shattering revelation that he believes 2616 should be interpreted that way.",FALSE,TRUE,24,121,508,0,FALSE,TRUE,TRUE,TRUE,0,122,1
steveklabnik,"He's also an author of 2616, so I'd expect him to be a pretty valid source when requesting clarification of it, too.",FALSE,TRUE,22,122,509,0,FALSE,TRUE,FALSE,TRUE,0,123,1
steveklabnik,"Knowing which are the rules without doubt, we have the right mindset to work on the PR.",FALSE,TRUE,17,122,510,1,FALSE,TRUE,FALSE,TRUE,0,123,2
steveklabnik,"Right. The real question is this: how far do we want Rails to go? Obviously, Rails cannot make every web service RESTful; that relies on human design. I would like to see Rails make it easier to comply with HTTP and HATEOAS, though, by providing helpful things in that regard. That's obviously longer-term and out of the scope of this pull request. However, this is a good start. I think the correct option as far as this pull request goes is this:",FALSE,TRUE,82,122,512,3,FALSE,TRUE,FALSE,TRUE,0,123,3
steveklabnik,"Add two new actions: patch and upsert. The update action should match to POST, the patch to PATCH, and upsert to PUT.",FALSE,TRUE,22,122,514,5,FALSE,TRUE,TRUE,TRUE,0,123,4
steveklabnik,"Start off with having this as a configuration option, ActionController.update_verb, which is set to :post in new rails apps, but has a default of :put so that old apps still work.",FALSE,TRUE,31,122,516,7,FALSE,TRUE,FALSE,TRUE,0,123,5
steveklabnik,"In Rails+1, change the default to :post but leave the option so that people can set it if they still don't want to update.",FALSE,TRUE,24,122,518,9,FALSE,TRUE,FALSE,TRUE,0,123,6
steveklabnik,"'upsert' isn't a great name. I've run across some people who don't know what this means, but it does capture what PUT is supposed to do in one, short word.",FALSE,TRUE,30,122,519,10,FALSE,TRUE,FALSE,TRUE,0,123,7
reschke,"@steveklabnik keep in mind that just changing PUT to PATCH doesn't make things better magically, you also need an Internet Media Type describing the patch format. And no,  application/json  doesn't.",FALSE,TRUE,30,123,521,1,FALSE,TRUE,FALSE,TRUE,0,124,1
steveklabnik,"Also, @mikekelly asked me to make something perfectly clear, so here it is:",FALSE,TRUE,13,124,522,0,FALSE,TRUE,FALSE,TRUE,0,125,1
steveklabnik,"I think that standards should be followed, because they're standards. They're the working agreements that we all go by, and if we discover that we're not compliant, software should changed based on that and nothing else. This doesn't mean they're infallible, and when they get revised, things should be changed again. Because compliance with a spec is the most important thing.",FALSE,TRUE,61,124,524,2,FALSE,TRUE,TRUE,TRUE,0,125,2
steveklabnik,"We now return to your regularly scheduled pull request.",FALSE,TRUE,9,124,525,3,FALSE,FALSE,FALSE,TRUE,0,125,3
steveklabnik,"@reschke right. Baby steps. That's why I think that POST actually works better for what rails calls update.",FALSE,TRUE,18,125,527,1,FALSE,TRUE,FALSE,TRUE,0,126,1
mikekelly,"it was tongue in cheek, and my point was that until httpbis makes it completely clear - there is no requirement to churn rails, because there are valid interpretations of 2616 which are perfectly fine with the current behaviour.",FALSE,TRUE,39,126,529,1,FALSE,FALSE,FALSE,TRUE,0,127,1
mikekelly,"So, essentially, jumping the httpbis gun w/ this PR is driven by speculation and/or pedantry and not a need to conform to a spec which unquestionably requires the change (there isn't one, HTTPbis is a WIP) or fix a functional problem with rails (there isn't one of these, either). I think everyone should be clear about that.",FALSE,TRUE,57,126,531,3,FALSE,TRUE,TRUE,TRUE,0,127,2
myronmarston,"So, essentially, jumping the httpbis gun w/ this PR is driven by speculation and/or pedantry rather than conforming to a spec which unquestionably requires the change (there isn't one, HTTPbis is a WIP) or fixing a functional problem with rails (there isn't one of these, either). I think everyone should be clear about that.",FALSE,TRUE,54,127,532,0,FALSE,TRUE,TRUE,TRUE,0,128,1
myronmarston,"That's not it at all. We have the one of the authors of the HTTP 1.1 spec, and the inventor of REST (which rails at least tries to adhere to...) saying that PUT means only full representations, and that rails is not in line with the HTTP or REST to allow it any other way.",FALSE,TRUE,55,127,534,2,FALSE,TRUE,FALSE,TRUE,0,128,2
mikekelly,"tl;dr cliffnotes for @tenderlove: change from this PR is significant, doesn't need to happen - may do in future if/when next revision of HTTP invalidates the approach. Roy Fielding is the ineffable fountain of HTTP wisdom.",FALSE,TRUE,36,128,536,1,FALSE,TRUE,FALSE,TRUE,0,129,1
mikekelly,"That's not it at all. We have the one of the authors of the HTTP 1.1 spec, and the inventor of REST (which rails at least tries to adhere to...) saying that PUT means only full representations, and that rails is not in line with the HTTP or REST to allow it any other way.",FALSE,TRUE,55,129,537,0,FALSE,TRUE,FALSE,TRUE,0,130,1
mikekelly,"Roy is an insanely smart guy and definitely an authoritative source on HTTP. His insight and opinion is important. But his opinion does not magically make 2616 more clear on this issue than it is. It's not clear. This is why Roy himself has revised it.",FALSE,TRUE,46,129,538,1,FALSE,TRUE,FALSE,TRUE,0,130,2
fxn,"@mikekelly we have not outlined yet the path, as I said before I don't expect to do any dramatic changes any time soon. Let's explore.",FALSE,TRUE,25,130,540,1,FALSE,TRUE,FALSE,TRUE,0,131,1
fxn,"At this point in the thread, the conclusion is that we are going to add some support for PATCH and promote good practices regarding PUT/PATCH in Rails applications. Good practices as described by Roy Fielding.",FALSE,TRUE,35,130,542,3,FALSE,TRUE,FALSE,TRUE,0,131,2
fxn,"But progressively, and with backwards compatibility as a must. At least for the time being.",FALSE,TRUE,15,130,544,5,FALSE,TRUE,FALSE,TRUE,0,131,3
mikekelly,"At this point in the thread, the conclusion is that we are going to add some support for PATCH and promote good practices regarding PUT/PATCH in Rails applications. Good practices as described by Roy Fielding.",FALSE,TRUE,35,131,545,0,FALSE,TRUE,FALSE,TRUE,0,132,1
mikekelly,"But progressively, and with backwards compatibility as a must. At least for the time being.",FALSE,TRUE,15,131,546,1,FALSE,TRUE,FALSE,TRUE,0,132,2
mikekelly,"Ok fair enough, in that case it looks like @NZKoz hit the nail on the head over a month ago.. #505 (comment)",FALSE,TRUE,22,131,547,2,FALSE,FALSE,FALSE,TRUE,0,132,3
fxn,"The point of following the discussion was to know whether we should have to add anything at all. At that point we didn't know.",FALSE,TRUE,24,132,548,0,FALSE,TRUE,TRUE,TRUE,0,133,1
fxn,"If Roy said  yeah, just do partial updates with PUT  no flag should be added, no code should be in core.",FALSE,TRUE,21,132,549,1,FALSE,TRUE,TRUE,TRUE,0,133,2
fxn,"If Roy says  PUT means PUT. There are no partial updates in PUT.  that justifies working on the PR. Working on the PR means what I said above, it does not mean applying the very patch.",FALSE,TRUE,36,132,550,2,FALSE,TRUE,FALSE,TRUE,0,133,3
gducharme,"Allowing access to PATCH as a configuration option will help drive awareness and adoption. Further down the line, we might well see a larger number of devs and applications clamoring for a change of default configuration, in much the same way we saw jQuery make its way in core.",FALSE,FALSE,49,133,552,1,FALSE,TRUE,FALSE,TRUE,0,134,1
gducharme,"Count this as +1 to a configuration option.",FALSE,FALSE,8,133,553,2,FALSE,FALSE,FALSE,TRUE,0,134,2
dlee,"Rails 4 has been announced for the summer. How much PATCH support should we get in? There have been various proposals of how to support PATCH in Rails 4:",FALSE,TRUE,29,134,555,1,TRUE,TRUE,TRUE,TRUE,0,135,1
dlee,"make PATCH and PUT both map to update and:",FALSE,TRUE,9,134,556,2,TRUE,TRUE,FALSE,TRUE,0,135,2
dlee,"make edit forms use PATCH by default and PUT by configuration opt-inmake edit forms use PUT by default and PATCH by configuration opt-in",FALSE,TRUE,23,134,557,3,TRUE,TRUE,FALSE,FALSE,1,135,3
dlee,"split update into different actions that map better to PUT and PATCH",FALSE,TRUE,12,134,559,5,TRUE,TRUE,FALSE,TRUE,0,135,4
steveklabnik,"@dhh mentioned on Twitter that he supports some kind of support.",FALSE,TRUE,11,135,560,0,FALSE,TRUE,FALSE,TRUE,0,136,1
steveklabnik,"Really, to be honest, I think this pull request should probably be closed, and a discussion thread should be made on rails-core about it. That's sorta out of the scope of this particular PR.",FALSE,TRUE,34,135,561,1,FALSE,TRUE,TRUE,TRUE,0,136,2
josevalim,"We should have a config option called config.method_for_update. Both routes and forms should respect this option. There is no need to generate both routes. It makes no sense to split update in two actions.",FALSE,TRUE,34,136,563,1,FALSE,TRUE,TRUE,TRUE,0,137,1
josevalim,"In other words, this pull request is almost good imo. It just needs to provide a config.method_for_update, make both AV and the router read from this config and change the router to stop generating both put and patch for update.",FALSE,TRUE,40,137,565,1,FALSE,TRUE,FALSE,TRUE,0,138,1
steveklabnik,"@josevalim It really depends on how far you actually want to go. A 'rails 4' gives a big opportunity to step back and evaluate the whole 'Rails REST' thing in general.",FALSE,TRUE,31,138,567,1,FALSE,TRUE,FALSE,TRUE,0,139,1
steveklabnik,"Then again, it seems that rails core wants rails 4 to be more of a normal release, so...",FALSE,TRUE,18,138,568,2,FALSE,FALSE,FALSE,TRUE,0,139,2
steveklabnik,"Regardless, I agree about this patch. It's good regardless of that stuff.",FALSE,TRUE,12,138,569,3,FALSE,TRUE,FALSE,TRUE,0,139,3
dlee,"If Rails core gives the OK, I can fix the patch according to @josevalim's recommendations.",FALSE,TRUE,15,139,570,0,TRUE,TRUE,FALSE,TRUE,0,140,1
fxn,"PATCH and PUT have different semantics. PUT means create/replace and it is idempotent. PATCH means update (full or partial) and it is not idempotent.",FALSE,TRUE,24,140,572,1,FALSE,TRUE,FALSE,TRUE,0,141,1
fxn,"If your application is a s3 clone, you want to upload assets with PUT. I think we need to be able to have both working, rather than a exclusive option.",FALSE,TRUE,30,140,573,2,FALSE,TRUE,FALSE,TRUE,0,141,2
josevalim,"@fxn I agree both options should work, it is just a matter of what we choose as default. For instance, the router should generate just put or patch routes by default for resources, however if for some specific case I want to use both PUT and PATCH or another, I should be able to do it. The same for the view, responders, etc... they should work for both put and patch.",FALSE,TRUE,71,141,575,1,FALSE,TRUE,TRUE,TRUE,0,142,1
fxn,"@josevalim ?",FALSE,TRUE,2,142,576,0,FALSE,FALSE,FALSE,TRUE,0,143,1
josevalim,"So as both me and @fxn agree, we would love to receive a new pull request that adds those small changes to this already existing pull request. Thanks @dlee for holding on all this time.",FALSE,TRUE,35,143,577,0,FALSE,TRUE,FALSE,TRUE,0,144,1
myronmarston,"I hinted at this above, but to reiterate: besides changing rails so that it supports PATCH, I'd also like to see improved support for proper PUT semantics.  Currently, rails idioms and conventions do not make this easy.  Specifically:",FALSE,TRUE,40,144,579,1,FALSE,TRUE,FALSE,TRUE,0,145,1
myronmarston,"The common AR method used for updates is update_attributes. It supports updates of the full representation, but it also supports partial updates, which, as we've discussed above, is a violation of PUT semantics (at least in the mind of Fielding and other HTTP experts).",FALSE,TRUE,44,144,581,3,FALSE,TRUE,FALSE,TRUE,0,145,2
myronmarston,"update_attributes also supports non-idempotent updates when used in combination w/ accepts_nested_attributes_for.",FALSE,TRUE,11,144,583,5,FALSE,FALSE,FALSE,TRUE,0,145,3
myronmarston,"I think the simplest way to provide an update method that does provide proper PUT semantics is a new method, replace_attributes.  It would set any attribute that is not included in the hash to nil, and thus treat the given attribute hash as the full resource.",FALSE,TRUE,47,144,585,7,FALSE,TRUE,FALSE,TRUE,0,145,4
myronmarston,"Would the rails core team by interested in the addition of this API? I'm willing to take a stab at it, and can open another ticket to discuss further details, but figured it was worth inquiring here first.",FALSE,TRUE,38,144,586,8,FALSE,TRUE,FALSE,TRUE,0,145,5
dlee,"I like that idea; it'd make adhering to HTTP much easier.",FALSE,TRUE,11,145,587,0,TRUE,TRUE,FALSE,TRUE,0,146,1
dlee,"I'd prefer a method name that more strongly indicates the full-resource replacement. What do you think about full_replace, replace_all_attributes, replace_resource, replace_with, or simply replace? An even stronger word might be supplant, but that just doesn't have a nice ring to it.",FALSE,TRUE,41,145,589,2,TRUE,TRUE,FALSE,TRUE,0,146,2
josevalim,"If there would be a method, I would simply call it replace_attributes. BUT in my opinion and experience it doesn't make sense at all to have a method like this in Rails because replace_attributes would be tied to the model while its behavior should actually be given by the resource (which is then defined by the application). Remember that different actors in the system (for example user and admin) may see the same model as two different resources where PUT would behave differently for each. Even without those actors, a single model may be exposed as two different resources or vice-versa.",FALSE,TRUE,101,146,591,1,FALSE,TRUE,TRUE,TRUE,0,147,1
josevalim,"In other words, replace_attributes (or anything like that) would be a poor fit and ultimately lead to poorly designed APIs as people would believe that a call to replace_attributes would be everything you would need to have proper PUT semantics.",FALSE,TRUE,40,146,592,2,FALSE,TRUE,FALSE,TRUE,0,147,2
myronmarston,"You bring up good points, @josevalim.  I agree that people tend to think  model == HTTP resource  (or not even really think in terms of HTTP resources) and replace_attributes may seem to implicitly condone that line of thinking.",FALSE,TRUE,39,147,593,0,FALSE,TRUE,FALSE,TRUE,0,148,1
myronmarston,"That said, rails doesn't currently have anything that helps make it easy to implement proper PUT semantics.  If you want to implement proper PUTs you are essentially totally on your own.  Do you have a better suggestion?  (Also, should we take this to another thread? I don't want to derail the discussion here, but it's certainly related).",FALSE,TRUE,60,147,595,2,FALSE,TRUE,TRUE,TRUE,0,148,2
myronmarston,"As I see it, replace_attributes isn't the perfect answer to HTTP spec or REST compliance any more than the rails scaffolds are.  But it is a tool that can help make it easier to implement proper semantics (FWIW--I implemented this in one of my models on a recent project, and it worked great).",FALSE,TRUE,54,147,596,3,FALSE,TRUE,FALSE,TRUE,0,148,3
josevalim,"How Rails doesn't provide anything? Rails is a framework, anyone can provide his own PUT setup according to his application semantics, as you did. And probably in less than 30LOC! Please start a new discussion as I have no interest in the direction this is going.",FALSE,TRUE,46,148,598,1,FALSE,TRUE,FALSE,TRUE,0,149,1
fxn,"Yeah, me neither.",FALSE,TRUE,3,149,599,0,FALSE,TRUE,FALSE,TRUE,0,150,1
fxn,"Resources are conceptual, ARs model database tables. There's a gap there that I think would show as a complicated setup for such a simple thing.",FALSE,TRUE,25,149,600,1,FALSE,TRUE,FALSE,TRUE,0,150,2
fxn,"I prefer to discuss that in another issue or PR.",FALSE,TRUE,10,149,601,2,FALSE,TRUE,FALSE,TRUE,0,150,3
myronmarston,"@josevalim and @fxn: no need for another ticket. Two core rails members have weighed in against the idea.  Thanks for the input.  That's one less open source contribution I need to worry about; I have enough on my plate as it is.",FALSE,TRUE,44,150,602,0,FALSE,TRUE,FALSE,TRUE,0,151,1
arunagw,"#5130 merged.",FALSE,FALSE,2,151,603,0,FALSE,FALSE,FALSE,TRUE,0,152,1
miguelsan,"In the risk on being pedant by arguing on a closed discussion against the last three comments (@josevalim, @fxn and @myronmarston), where I even haven't any personal use case yet, I will still make my point here, since I don't know where it goes better.",FALSE,FALSE,45,152,604,0,FALSE,TRUE,FALSE,TRUE,0,153,1
miguelsan,"Rails does not provide a clean way to map resources to models  to and fro , which makes josevalim's point somewhat valid. I mean, devs usually call a model into a variable (normally in the controlle's show method), but they might as well make a mix of some related models to represent the resource that they want to expose. In this second case, they then have to rip the params off in the update action, so that they get the different models to validate and save and so on. That's what I see as a weak part of the framework. I feel that josevalim's argument could backing up a kind of  presenters-and-back  as a best way to translate/map models into resources, and that the implementation of such a paradigm into Rails should be seriously weighted. Were they dismissed (which I suppose, for that is a whole subject in itself), I would then come to my conclusion: I dislike disregarding a new method called replace_resource , which sets all empty attributes to nil (or blank, depending on validation rules), supposed that it gets applied on a single model. You can afterwards put all needed warnings in the documentation about the semantic meaning of it. I mean, Rails 4 is going to promote a new verb just to adhere to standards, without any appreciable gain in the short term, just for the sake of it? Do you really mean that you are going to leave devs on their own, having to understand why to use this or that, without further help?  Boy, if you want to make proper use of this new feature that we advocate, you'll have to write your own methods for it, it's just 30LOC, boy. After all, Rails is just a framework, don't expect too much from us. ",FALSE,FALSE,299,152,606,2,FALSE,TRUE,TRUE,TRUE,0,153,2
miguelsan,"See my point? I know I am a bit sarcastic at giving reasons for my petition, but I do it just in order to make it crystal clear and avoid another six months of discussion on the need of such method. I hope I got it.",FALSE,FALSE,46,152,607,3,FALSE,TRUE,FALSE,TRUE,0,153,3
miguelsan,"PS. Sorry for coming in so late, I just saw the thread linked in the Rails Blog. I got through the whole of it, oh my!",FALSE,FALSE,26,152,608,4,FALSE,TRUE,FALSE,TRUE,0,153,4
miguelsan,"I elaborated a bit more on the subject of ResourceAccessor and how and why the replace_resource method is needed..",FALSE,FALSE,19,153,609,0,FALSE,TRUE,FALSE,TRUE,0,154,1
bf4,"fwiw, I backported the HTTP PATCH verb work for Rails 3.2 https://gist.github.com/bf4/8940203",FALSE,FALSE,12,154,610,0,FALSE,TRUE,FALSE,TRUE,0,155,1
nextofsearch,"Hi @bf4,",FALSE,FALSE,2,155,611,0,FALSE,TRUE,FALSE,TRUE,0,156,1
nextofsearch,"Your patch doesn't work with my app. Rails 3.2.22.5",FALSE,FALSE,9,155,612,1,FALSE,TRUE,FALSE,TRUE,0,156,2
nextofsearch,"It crashes when running the web server with the following error:",FALSE,FALSE,11,155,613,2,FALSE,FALSE,FALSE,TRUE,0,156,3
nextofsearch,".rvm/gems/ruby-1.9.3-p551@rails3.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/mapper.rb:178:in `default_controller_and_action': missing :action (ArgumentError)",FALSE,FALSE,5,155,614,3,FALSE,FALSE,FALSE,TRUE,0,156,4
nextofsearch,"When running 'rake routes'",FALSE,FALSE,4,155,615,4,FALSE,FALSE,FALSE,TRUE,0,156,5
nextofsearch,"rake aborted!ArgumentError: missing :action/Users/danolee/.rvm/gems/ruby-1.9.3-p551@rails3.2/gems/actionpack-3.2.22.5/lib/action_dispatch/routing/mapper.rb:178:in `default_controller_and_action'",FALSE,FALSE,5,155,616,5,FALSE,FALSE,FALSE,TRUE,0,156,6
nextofsearch,"Any help will be greatly appreciated.",FALSE,FALSE,6,155,617,6,FALSE,FALSE,FALSE,TRUE,0,156,7
