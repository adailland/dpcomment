% Generated by Discussion model rust.34743.txt
% File generated on 2017/08/02 15:59:33

@relation pr1501703973943

@attribute author String
@attribute textual String
@attribute isProjectMember {TRUE, FALSE}
@attribute isInvited {TRUE, FALSE}
@attribute numberOfWords numeric
@attribute commentsSoFar numeric
@attribute allUtterancesSoFar numeric
@attribute utterancesInCommentSoFar numeric
@attribute utteredByOriginalPoster {TRUE, FALSE}
@attribute hasCapitalizedWord {TRUE, FALSE}
@attribute containsShould {TRUE, FALSE}
@attribute hasDecisions {TRUE, FALSE}
@attribute howManyDecisions numeric
@attribute idComment numeric

@data
badboy,"As discussed in https://internals.rust-lang.org/t/need-help-with-emscripten-port/3154/46 I'm trying to update the used LLVM checkout in Rust.",FALSE,FALSE,14,0,0,0,TRUE,TRUE,FALSE,TRUE,0,1
badboy,"I basically took @shepmaster's code and applied it on top (though I did the commits manually, the original commits have better descriptions.",FALSE,FALSE,22,0,1,1,TRUE,TRUE,FALSE,TRUE,0,1
badboy,"With these changes I was able to build rustc. make check throws one last error on run-pass/issue-28950.rs. Output: https://gist.github.com/badboy/bcdd3bbde260860b6159aa49070a9052",FALSE,FALSE,19,0,2,2,TRUE,TRUE,FALSE,TRUE,0,1
badboy,"I took the metadata changes as is and they seem to work, though it now uses the module in another step. I'm not sure if this is the best and correct way.",FALSE,FALSE,32,0,3,3,TRUE,TRUE,FALSE,TRUE,0,1
badboy,"Things to do:",FALSE,FALSE,3,0,4,4,TRUE,TRUE,FALSE,TRUE,0,1
badboy,"Make run-pass/issue-28950.rs pass unrelated",FALSE,FALSE,4,0,5,5,TRUE,TRUE,FALSE,TRUE,0,1
badboy,"Find out how the PositionIndependentExecutable setting is now used",FALSE,FALSE,9,0,6,6,TRUE,TRUE,FALSE,TRUE,0,1
badboy,"Is the llvm::legacy still the right way to do these things?",FALSE,FALSE,11,0,7,7,TRUE,TRUE,FALSE,TRUE,0,1
badboy,"cc @brson @alexcrichton",FALSE,FALSE,3,0,8,8,TRUE,FALSE,FALSE,TRUE,0,1
rust-highfive,"Thanks for the pull request, and welcome! The Rust team is excited to review your changes, and you should hear from @pnkfelix (or someone else) soon.",FALSE,FALSE,26,1,9,0,FALSE,TRUE,TRUE,TRUE,0,2
rust-highfive,"If any changes to this PR are deemed necessary, please add them as extra commits. This ensures that the reviewer can see what has changed since they last reviewed the code. Due to the way GitHub handles out-of-date commits, this should also make it reasonably obvious what issues have or haven't been addressed. Large or tricky changes may require several passes of review and changes.",FALSE,FALSE,65,1,10,1,FALSE,TRUE,TRUE,TRUE,0,2
rust-highfive,"Please see the contribution instructions for more information.",FALSE,FALSE,8,1,11,2,FALSE,TRUE,FALSE,TRUE,0,2
badboy,"Ah, forgot to mention that I am using a LLVM checkout of http://llvm.org/git/llvm.git",FALSE,FALSE,13,2,12,0,TRUE,TRUE,FALSE,TRUE,0,3
frewsxcv,"Tangential comment to this pull request: Does anyone know what this got replaced with since it's presumably legacy now?",FALSE,FALSE,19,3,15,2,FALSE,TRUE,FALSE,TRUE,0,4
eefriedman,"LLVM pass manager infrastructure is currently getting rewritten to be more flexible.  See https://github.com/llvm-mirror/llvm/blob/d1aa4ea020d932ffc6a3c3e4d1bbab659391c725/tools/opt/NewPMDriver.cpp#L50 for a usage example for the new API.  That said, the rewrite isn't complete yet.",FALSE,FALSE,31,4,16,0,FALSE,TRUE,FALSE,TRUE,0,5
alexcrichton,"Looks like clang is also still using this, so we probably don't need to update just yet until they do at least.",FALSE,TRUE,22,5,18,1,FALSE,TRUE,FALSE,TRUE,0,6
shepmaster,"I'm pretty sure this is a hack that only makes sense in my fork (there's no PIE for microcontrollers :-)).",FALSE,TRUE,20,6,19,0,FALSE,TRUE,FALSE,TRUE,0,7
shepmaster,"Even if we wanted to remove this (doubtful), it should be removed and not commented-out. I believe that LLVM applies this flag at a more granular level now, so looking downward for another flag to apply it to seems reasonable.",FALSE,TRUE,40,6,20,1,FALSE,TRUE,TRUE,TRUE,0,7
badboy,"Right, this is one of the things mentioned above. I left it in, so I remember to fix that.",FALSE,FALSE,19,7,21,0,TRUE,TRUE,FALSE,TRUE,0,8
alexcrichton,"This was deleted here which appears to be replaced by this which is a new setPIELevel function on the LLVM module itself.",FALSE,TRUE,22,8,22,0,FALSE,TRUE,FALSE,TRUE,0,9
alexcrichton,"The LLVM module isn't available at this time so we'll just have to arrange for it to be set later. Perhaps something like this though:",FALSE,TRUE,25,8,23,1,FALSE,TRUE,FALSE,TRUE,0,9
alexcrichton,"Leave this block, but gated by #if LLVM_VERSION_MINOR <= 8 for compatibility with older versions.",FALSE,TRUE,15,8,24,2,FALSE,TRUE,FALSE,TRUE,0,9
alexcrichton,"Add LLVMRustSetModulePIELevel as a function which is a noop on pre-LLVM-3.9 and afterwards calls the setPIELevel function on the LLVM module.",FALSE,TRUE,21,8,25,3,FALSE,TRUE,FALSE,TRUE,0,9
badboy,"Did you mean we have a LLVMRustSetModulePIELevel with the #ifdef for calling the setPIELevel method?If so, at what point do we call it?",FALSE,FALSE,23,9,28,2,TRUE,TRUE,FALSE,TRUE,0,10
shepmaster,"If so, at what point do we call it?",FALSE,TRUE,9,10,30,1,FALSE,TRUE,FALSE,TRUE,0,11
shepmaster,"I'd believe you want to call it every time an LLVM module is created.",FALSE,TRUE,14,10,32,3,FALSE,TRUE,FALSE,TRUE,0,11
shepmaster,"Shouldn't commit commented-out code. This appears to be moved to the constructor, so I believe it's safe and correct to just remove this.",FALSE,TRUE,23,11,33,0,FALSE,TRUE,FALSE,TRUE,0,12
badboy,"Right. This will be removed.",FALSE,FALSE,5,12,34,0,TRUE,TRUE,FALSE,TRUE,0,13
shepmaster,"Although thinking of what @alexcrichton was saying, it might have to just be placed in an #if guard to maintain compatibility with earlier LLVM...",FALSE,TRUE,24,13,36,1,FALSE,TRUE,FALSE,TRUE,0,14
alexcrichton,"Yeah we may want this for compatibility with older llvm versions, but I'm not sure if the fix here is backwards compatible (it may be?)",FALSE,TRUE,25,14,38,1,FALSE,TRUE,FALSE,TRUE,0,15
badboy,"It will definitely need to change, as we changed the function.However, the new version might even work with old LLVM, doesn't it?",FALSE,FALSE,22,15,39,0,TRUE,TRUE,FALSE,TRUE,0,16
alexcrichton,"I think maybe yeah? I'm not actually sure what changed here, it looks like just a bit of shuffling around to me...",FALSE,TRUE,22,16,40,0,FALSE,TRUE,FALSE,TRUE,0,17
shepmaster,"It's indeed possible that the updated code (that creates the metadata early) will work with older LLVMs. Specifically, LLVM inverted the way the debug information graph is built. All the builders inside LLVM magically handle this, as long as there is something to add the debug information to. Creating the debug information as early as possible enables this.",FALSE,TRUE,58,17,42,1,FALSE,TRUE,FALSE,TRUE,0,18
shepmaster,"How did this work before? symbols wasn't even being used...",FALSE,TRUE,10,18,43,0,FALSE,FALSE,FALSE,TRUE,0,19
badboy,"It was used in the old version, see 0763041#diff-2030f049f8df2454e3720ea9403bc14aL363.",FALSE,FALSE,9,19,44,0,TRUE,FALSE,FALSE,TRUE,0,20
badboy,"I should have squashed that.",FALSE,FALSE,5,19,45,1,TRUE,TRUE,TRUE,TRUE,0,20
shepmaster,"I'm no core contributor, but I don't see the value in commit X introducing less-than-great variable names and then commit X+1 improving them. I'd just squash those two together.",FALSE,TRUE,29,20,46,0,FALSE,TRUE,FALSE,TRUE,0,21
badboy,"@shepmaster yes, I should have squashed them beforehand. I can still do this.",FALSE,FALSE,13,21,47,0,TRUE,TRUE,TRUE,TRUE,0,22
alexcrichton,"Right now our line limit is 100 characters so I think this will trigger make tidy, could you also add imports instead of using absolute paths here?",FALSE,TRUE,27,22,48,0,FALSE,TRUE,FALSE,TRUE,0,23
alexcrichton,"Can you wrap this in a #if to only execute this new part on LLVM version >= 9 and keep the old code around for 8 and below? That should help us keep compiling against older versions of LLVM.",FALSE,TRUE,39,23,49,0,FALSE,TRUE,TRUE,TRUE,0,24
alexcrichton,"Come to think of that, can you also ensure that the llvm::legacy:: above compiles on LLVM 3.7 and 3.8?",FALSE,TRUE,19,23,50,1,FALSE,TRUE,FALSE,TRUE,0,24
alexcrichton,"This is currently the rust-llvm-2016-03-13 branch in the rust-lang/llvm repo, we'll want to make a new branch which points to this LLVM version and also has some of our custom patches, which includes.",FALSE,TRUE,33,24,51,0,FALSE,TRUE,FALSE,TRUE,0,25
alexcrichton,"I've done this at the rust-lang-2016-07-09 branch as well as including some of our own patches (mostly just related to compiling LLVM itself). Can you update this commit to that patch?",FALSE,TRUE,31,24,52,1,FALSE,TRUE,FALSE,TRUE,0,25
alexcrichton,"A failure on issue-28950 looks like it may be specific to your system or something like that, I doubt that the LLVM changes would cause it to fail. Are you sure that it succeeds before this PR on your local computer?",FALSE,TRUE,41,25,53,0,FALSE,TRUE,FALSE,TRUE,0,26
badboy,"@alexcrichton Indeed, with a fresh checkout of rust-lang/rust I see the same error on issue-28950",FALSE,FALSE,15,26,54,0,TRUE,TRUE,FALSE,TRUE,0,27
alexbool,"This is supposed to fix #34119 ?",FALSE,FALSE,7,27,55,0,FALSE,FALSE,FALSE,TRUE,0,28
badboy,"@alexbool If it is fixed by something in LLVM upstream, then yes",FALSE,FALSE,12,28,56,0,TRUE,TRUE,FALSE,TRUE,0,29
brson,"cc @kripken Here's Rust's LLVM upgrade.",FALSE,TRUE,6,29,57,0,FALSE,TRUE,FALSE,TRUE,0,30
kripken,"@brson: cool, emscripten's merges of that same LLVM commit are in https://github.com/kripken/emscripten-fastcomp/tree/next-merge and https://github.com/kripken/emscripten-fastcomp-clang/tree/next-merge .",FALSE,TRUE,15,30,58,0,FALSE,TRUE,FALSE,TRUE,0,31
kripken,"The tracking issue is kripken/emscripten#4430. Looks like only some SIMD issues block it, which probably wouldn't be a problem for rust, so it could be usable for testing already.",FALSE,TRUE,29,30,59,1,FALSE,TRUE,FALSE,TRUE,0,31
shepmaster,"I'd strongly encourage having links to the original LLVM issues / commits that are forcing these changes. These links should be in the commit message that modifies the relevant aspect of the code. That should make it much easier for people in the future to track down the why.",FALSE,TRUE,49,31,60,0,FALSE,TRUE,TRUE,TRUE,0,32
shepmaster,"That should make it much easier for people in the future to track down the why.",FALSE,TRUE,16,32,61,0,FALSE,FALSE,TRUE,TRUE,0,33
shepmaster,"I say this having been one of those people to track down such information in the past.",FALSE,TRUE,17,32,62,1,FALSE,TRUE,FALSE,TRUE,0,33
alexcrichton,"@shepmaster to clarify, you mean the changes to LLVM bindings and why they're changing? (e.g. this)",FALSE,TRUE,16,33,63,0,FALSE,TRUE,FALSE,TRUE,0,34
shepmaster,"you mean the changes to LLVM bindings and why they're changing",FALSE,TRUE,11,34,64,0,FALSE,TRUE,FALSE,TRUE,0,35
shepmaster,"Yeah; sorry to be unclear. Having the commit message be something like",FALSE,TRUE,12,34,65,1,FALSE,TRUE,FALSE,TRUE,0,35
shepmaster,"[LLVM 3.9] Configure PIE at the module level instead of compilation unit level",FALSE,TRUE,13,34,66,2,FALSE,TRUE,FALSE,TRUE,0,35
shepmaster,"This was deleted here[linky] which appears to be replaced by this[linky] which is a new setPIELevel function on the LLVM module itself.",FALSE,TRUE,22,34,67,3,FALSE,TRUE,FALSE,TRUE,0,35
shepmaster,"would make that commit ðŸ’¯ in my book. Otherwise the commit is like  moving some functions around! ",FALSE,TRUE,17,34,68,4,FALSE,TRUE,FALSE,TRUE,0,35
shepmaster,"Again, I stress that I hold no power to enforce these suggestions; I just would have found commits like this to be useful when I was digging into the existing code to make these kind of changes. ðŸŒ´",FALSE,TRUE,38,34,69,5,FALSE,TRUE,FALSE,TRUE,0,35
alexcrichton,"Sounds like a good plan to me!",FALSE,TRUE,7,35,70,0,FALSE,FALSE,FALSE,TRUE,0,36
badboy,"I will rebase the commits and change accordingly (force-push incoming!)",FALSE,FALSE,10,36,71,0,TRUE,FALSE,FALSE,TRUE,0,37
badboy,"@shepmaster Thanks for mentioning this, it's indeed a good idea, especially in the long run",FALSE,FALSE,15,36,72,1,TRUE,TRUE,FALSE,TRUE,0,37
solson,"@alexcrichton @eddyb Can this PR also be placed under the  Launch MIR into Orbit  milestone, since it's blocking #34119?",FALSE,FALSE,19,37,73,0,FALSE,TRUE,FALSE,TRUE,0,38
alexcrichton,"@solson sure!",FALSE,TRUE,2,38,74,0,FALSE,FALSE,FALSE,TRUE,0,39
badboy,"I just force-pushed with the new commits",FALSE,FALSE,7,39,75,0,TRUE,FALSE,FALSE,TRUE,0,40
badboy,"Reorganized all commits into logical blocks, including proper descriptions and links",FALSE,FALSE,11,39,76,1,TRUE,TRUE,FALSE,TRUE,0,40
badboy,"I had to upgrade compiler-rt as well to get it to compile, this is not yet reflected here",FALSE,FALSE,18,39,77,2,TRUE,TRUE,FALSE,TRUE,0,40
badboy,"I had to re-enable the std::thread thing in LLVM to get it to compile at least once. We probably need to find a proper workaround first.",FALSE,FALSE,26,39,78,3,TRUE,TRUE,FALSE,TRUE,0,40
badboy,"When choosing anything other than Default in ffc5a8608f1418f6a52f754232ba5edb90427370 I get the following error on compile:",FALSE,FALSE,15,39,79,4,TRUE,TRUE,FALSE,TRUE,0,40
badboy,"It seems something is not compiled correctly with -fPIC, but I'm not sure what to do here.",FALSE,FALSE,17,39,80,5,TRUE,TRUE,FALSE,TRUE,0,40
brson,"Thanks @badboy. This is a great looking branch.",FALSE,TRUE,8,40,81,0,FALSE,TRUE,FALSE,TRUE,0,41
badboy,"Btw, I tested with commit 14f04db1b53e21922728767b440a44741c9e292c from upstream compiler-rt.",FALSE,TRUE,9,41,82,0,TRUE,TRUE,FALSE,TRUE,0,42
alexcrichton,"This is actually currently conditional when the argument is passed to LLVMRustCreateTargetMachine:",FALSE,TRUE,12,42,83,0,FALSE,TRUE,FALSE,TRUE,0,43
alexcrichton,"Perhaps that logic could be extracted to a method and that could be passed down here as well?",FALSE,TRUE,18,42,85,2,FALSE,TRUE,FALSE,TRUE,0,43
badboy,"Adding the exact same code to calculate any_library and reloc_model and then gating that call seems to work now, even with PIELevel::Level::Large (which, to my understanding, should be equivalent to the old option).",FALSE,TRUE,33,43,87,1,TRUE,TRUE,TRUE,TRUE,0,44
badboy,"I will refactor the code into a method, so it can be called where necessary",FALSE,TRUE,15,44,88,0,TRUE,FALSE,FALSE,TRUE,0,45
alexcrichton,"Ok, awesome! So long as we're doing the same as before (whatever that PIELevel is), sounds good to me",FALSE,TRUE,19,45,89,0,FALSE,TRUE,FALSE,TRUE,0,46
shepmaster,"whatever that PIELevel is",FALSE,TRUE,4,46,90,0,FALSE,TRUE,FALSE,TRUE,0,47
shepmaster,"All I know is that my PIELevel is always too low. ðŸ?°",FALSE,TRUE,12,46,91,1,FALSE,TRUE,FALSE,TRUE,0,47
alexcrichton,"one more absolute import here",FALSE,TRUE,5,47,92,0,FALSE,FALSE,FALSE,TRUE,0,48
badboy,"Oh right, will fix it.",FALSE,TRUE,5,48,93,0,TRUE,FALSE,FALSE,TRUE,0,49
alexcrichton,"I swear this changes literally every single LLVM release",FALSE,TRUE,9,49,94,0,FALSE,TRUE,FALSE,TRUE,0,50
badboy,"I'm sure they find the best API eventually",FALSE,TRUE,8,50,95,0,TRUE,TRUE,FALSE,TRUE,0,51
alexcrichton,"I think this needs to stick around for LLVM 3.8, right?",FALSE,TRUE,11,51,97,1,FALSE,TRUE,FALSE,TRUE,0,52
badboy,"Hm, I'll check that again, testing it with 3.8 as well",FALSE,TRUE,11,52,98,0,TRUE,TRUE,FALSE,TRUE,0,53
alexcrichton,"FWIW in the past I've used the precompiled 3.7/3.8 distributions that LLVM ships and I just have a few build directories when I test out these changes, I just double check the C++ compiles on each and shouldn't take too long.",FALSE,TRUE,41,53,99,0,FALSE,TRUE,TRUE,TRUE,0,54
alexcrichton,"This'll probably need a #ifdef for 3.7-8 compat",FALSE,TRUE,8,54,100,0,FALSE,FALSE,FALSE,TRUE,0,55
badboy,"Oops, right.",FALSE,TRUE,2,55,101,0,TRUE,FALSE,FALSE,TRUE,0,56
alexcrichton,"When choosing anything other than Default in ffc5a86 I get the following error on compile:",FALSE,TRUE,15,56,102,0,FALSE,TRUE,FALSE,TRUE,0,57
alexcrichton,"That seems fine to me, we probably want Default for now anyway.",FALSE,TRUE,12,56,103,1,FALSE,TRUE,FALSE,TRUE,0,57
alexcrichton,"I had to upgrade compiler-rt as well to get it to compile, this is not yet reflected here",FALSE,TRUE,18,56,104,2,FALSE,TRUE,FALSE,TRUE,0,57
alexcrichton,"Do you have a branch which contains our patches as well? If so, I'll push it up to rust-lang! We unfortunately have a lot of patches here :(",FALSE,TRUE,28,56,105,3,FALSE,TRUE,FALSE,TRUE,0,57
alexcrichton,"I had to re-enable the std::thread thing in LLVM to get it to compile at least once.",FALSE,TRUE,17,56,106,4,FALSE,TRUE,FALSE,TRUE,0,57
alexcrichton,"Drat, could you send a PR to the LLVM branch in rust-lang/llvm though?",FALSE,TRUE,13,56,107,5,FALSE,TRUE,FALSE,TRUE,0,57
badboy,"Do you have a branch which contains our patches as well? If so, I'll push it up to rust-lang! We unfortunately have a lot of patches here :(",FALSE,TRUE,28,57,108,0,TRUE,TRUE,FALSE,TRUE,0,58
badboy,"I will try to combine those.",FALSE,TRUE,6,57,109,1,TRUE,TRUE,FALSE,TRUE,0,58
badboy,"Drat, could you send a PR to the LLVM branch in rust-lang/llvm though?",FALSE,TRUE,13,57,110,2,TRUE,TRUE,FALSE,TRUE,0,58
badboy,"I can, but this will break mingw-w64 then again.",FALSE,TRUE,9,57,111,3,TRUE,TRUE,FALSE,TRUE,0,58
alexcrichton,"Ah yeah and if you have difficulty merging the compiler-rt patches, I can also help out rebasing those. Also yeah we need to get this working on mingw-w64, so were the patches to enable usage of std::thread? If so we just need to figure out how to get it working there.",FALSE,TRUE,51,58,113,1,FALSE,TRUE,FALSE,TRUE,0,59
alexcrichton,"Not sure how to deal with upstream adding more of what we need to remove...",FALSE,TRUE,15,58,114,2,FALSE,TRUE,FALSE,TRUE,0,59
badboy,"New commits tackle the latest comments. I tried with LLVM 3.8 and stage1 still compiles. For some reason the LLVM 3.7 fails due to changed arguments of a function called in RustWrapper.cpp.",FALSE,TRUE,32,59,115,0,TRUE,TRUE,FALSE,TRUE,0,60
badboy,"Next on: compiler-rt merging",FALSE,TRUE,4,59,116,1,TRUE,TRUE,FALSE,TRUE,0,60
alexcrichton,"Well this is gonna get interested, wanted to test some things out locally and got:",FALSE,TRUE,15,60,117,0,FALSE,FALSE,FALSE,TRUE,0,61
alexcrichton,"I'm on Ubuntu 14.04 (which a bunch of our builders are as well), so we'll have to resolve this one way or another. We'll also need to update the README I believe to reflect that 3.4.3 is the minimum version, not 2.8.8 any more",FALSE,TRUE,44,60,118,1,FALSE,TRUE,FALSE,TRUE,0,61
badboy,"Oh right, that cmake thing. D'oh!",FALSE,TRUE,6,61,119,0,TRUE,TRUE,FALSE,TRUE,0,62
alexcrichton,"Oh dear, do we also need to require a super-new clang now? I'm getting:",FALSE,TRUE,14,62,121,1,FALSE,TRUE,FALSE,TRUE,0,63
alexcrichton,"My clang version is Ubuntu clang version 3.4-1ubuntu3",FALSE,TRUE,8,62,122,2,FALSE,TRUE,FALSE,TRUE,0,63
alexcrichton,"Oh wait no nevermind that's just because -Wnon-virtual-dtor is in llvm-config --cxxflags from those pre built binaries, disregard!",FALSE,TRUE,18,63,123,0,FALSE,FALSE,FALSE,TRUE,0,64
alexcrichton,"Ok, confirmed 3.8 at least compiles, and 3.7.1 compiles for me  as well. Note that 3.7.0 doesn't compile for known reasons, so maybe you're testing against that locally? If travis passes though we should be fine.",FALSE,TRUE,37,64,124,0,FALSE,TRUE,TRUE,TRUE,0,65
badboy,"D'oh! Ok, it is 3.7.0 breaking, thanks Ubuntuâ€¦",FALSE,TRUE,8,65,125,0,TRUE,TRUE,FALSE,TRUE,0,66
alexcrichton,"Ok, CMake versions are:",FALSE,TRUE,4,66,126,0,FALSE,TRUE,FALSE,TRUE,0,67
alexcrichton,"And the Windows bots are running cmake 3.2.1",FALSE,TRUE,8,66,127,1,FALSE,TRUE,FALSE,TRUE,0,67
alexcrichton,"Hurray! Almost everything needs an upgrade! The linux bots should all be easy enough as they're just tweaking some docker images. Most of them are on ubuntu 14.04 for no particular reason, and Android which is on 16.04 shows that it should be far enough forward. The Windows bots will be... interesting, but I'll figure it out.",FALSE,TRUE,57,66,129,3,FALSE,TRUE,TRUE,TRUE,0,67
alexcrichton,"As soon as this is ready to go we can r+ and confirm it actually needs an upgrade, but I'll start upgrading them anyway",FALSE,TRUE,24,66,130,4,FALSE,TRUE,FALSE,TRUE,0,67
badboy,"Btw, this is the error I get with the current compiler-rt:",FALSE,TRUE,11,67,131,0,TRUE,TRUE,FALSE,TRUE,0,68
badboy,"It's missing some files, upstream checkouts has these files.I'm not sure why it works in master right now.Maybe it is enough if we place the right files there instead of doing a full compiler-rt upgrade?",FALSE,TRUE,35,67,132,1,TRUE,TRUE,FALSE,TRUE,0,68
alexcrichton,"Hm that means that build system changes probably happened, in theory a compiler-rt upgrade should be pretty easy, so I think it'd be worth trying that out first",FALSE,TRUE,28,68,133,0,FALSE,TRUE,TRUE,TRUE,0,69
badboy,"If you say so, I will try that first in the morning.",FALSE,TRUE,12,69,134,0,TRUE,TRUE,FALSE,TRUE,0,70
badboy,"I have a branch of compiler-rt here where I merged master from http://llvm.org/git/compiler-rt and fixed the conflicts. Right now it compiles on my test server, but I might have broken other stuff.",FALSE,TRUE,32,70,135,0,TRUE,TRUE,FALSE,TRUE,0,71
alexcrichton,"Ok cool, thanks! I'll try to go through that soon. Unfortunately it was a bit rocky updating the CMake version. So in updating the linux-cross image for Ubuntu 16.04 it means we couldn't use our old  vendored  MIPS compilers, we could now switch to the  official  MIPS compilers. Unfortunately they don't support compiling with -msoft-float which we pass. It looks like not passing them, however, is gonna make it past all the bots (test are still running).",FALSE,TRUE,77,71,138,2,FALSE,TRUE,FALSE,TRUE,0,72
alexcrichton,"cc @japaric, do you have an idea of how crucial it is to pass -msoft-float for the MIPS target? I can't imagine we have all that many users of the mips-unknown-linux-gnu target right now as we haven't even had to worry about glibc compatibility just yet, but you never know!",FALSE,TRUE,50,71,140,4,FALSE,TRUE,FALSE,TRUE,0,72
alexcrichton,"Note that the mipsel target doesn't pass -msoft-float, so I'm tempted to just not worry about it and stop passing that flag.",FALSE,TRUE,22,71,141,5,FALSE,TRUE,FALSE,TRUE,0,72
alexcrichton,"@badboy I'll get back to you about the compiler-rt upgrade.",FALSE,TRUE,10,71,142,6,FALSE,TRUE,FALSE,TRUE,0,72
shepmaster,"Perhaps these should reference the old version, like the previous set? LLVM_VERSION_MINOR <= 8 and flip the clauses?",FALSE,TRUE,18,73,144,1,FALSE,TRUE,TRUE,TRUE,0,74
shepmaster,"Ditto the flip.",FALSE,TRUE,3,74,145,0,FALSE,FALSE,FALSE,TRUE,0,75
alexcrichton,"@badboy ok it looks like the LLVM commit I gave you didn't actually build, the std::thread patch was indeed bad. I tweaked it again to hopefully be more future proof this time, and I think fewer hacks are needed now that we've upgraded our OSX compilers. Can you update the llvm submodule to rust-lang/llvm@6e665b7?",FALSE,TRUE,54,75,147,1,FALSE,TRUE,FALSE,TRUE,0,76
alexcrichton,"Ok, and I have an initial stack of patches for compiler-rt.",FALSE,TRUE,11,76,148,0,FALSE,TRUE,FALSE,TRUE,0,77
alexcrichton,"I experimented dropping:",FALSE,TRUE,3,76,149,1,FALSE,TRUE,FALSE,TRUE,0,77
alexcrichton,"Old MIPS patches, our compilers are much newer and hopefully won't need them",FALSE,TRUE,13,76,150,2,FALSE,TRUE,FALSE,TRUE,0,77
alexcrichton,"Old ARM patches, merged upstream",FALSE,TRUE,5,76,151,3,FALSE,TRUE,FALSE,TRUE,0,77
alexcrichton,"Old Android patches, hopefully our compiler is new enough to not need them",FALSE,TRUE,13,76,152,4,FALSE,TRUE,FALSE,TRUE,0,77
alexcrichton,"Old SJ/LJ patches, current changes may have subsumed this? Not sure (cc @vhbit)",FALSE,TRUE,13,76,153,5,FALSE,TRUE,FALSE,TRUE,0,77
alexcrichton,"Other than that couldn't drop too much unfortunately",FALSE,TRUE,8,76,154,6,FALSE,TRUE,FALSE,TRUE,0,77
alexcrichton,"Still testing locally, but if you want to update this PR we can start sending it to bors.",FALSE,TRUE,18,76,155,7,FALSE,TRUE,FALSE,TRUE,0,77
alexcrichton,"Er actually, to send to the bots we have to pull in all the new images, and to do that we have to land #34841 first, but you get my point :)",FALSE,TRUE,32,77,156,0,FALSE,FALSE,FALSE,TRUE,0,78
alexcrichton,"Fixed some minor issues with compiler-rt, should pass the linux-cross bot now and hopefully Android as well. That's where most changes were targeted, so it should be good to go now I think. New commit to update to is rust-lang/compiler-rt@3c51a62",FALSE,TRUE,40,78,157,0,FALSE,TRUE,TRUE,TRUE,0,79
japaric,"cc @japaric, do you have an idea of how crucial it is to pass -msoft-float for the MIPS target?",FALSE,TRUE,19,79,160,2,FALSE,TRUE,FALSE,TRUE,0,80
japaric,"I looked into this mips-gcc float ABI thing. Here are my notes:",FALSE,TRUE,12,79,161,3,FALSE,TRUE,FALSE,TRUE,0,80
japaric,"The current rust-buildbot MIPS toolchain (15.10 ppa package) uses the soft float ABI",FALSE,TRUE,13,79,162,4,FALSE,TRUE,FALSE,TRUE,0,80
japaric,"with that toolchain, we don't need to pass -msoft-float because it's already the default ABI",FALSE,TRUE,15,79,164,6,FALSE,TRUE,FALSE,TRUE,0,80
japaric,"the new rust-buildbot toolchain (16.04 official package) uses the hard float ABI(!)",FALSE,TRUE,12,79,167,9,FALSE,TRUE,FALSE,TRUE,0,80
japaric,"I think that's why @alexcrichton is getting an error building C dependencies with -msoft-float -- these two float ABIs are incompatible and can't be linked together",FALSE,TRUE,26,79,168,10,FALSE,TRUE,FALSE,FALSE,1,80
japaric,"more clearly: using the -msoft-float flag you are building new C binaries (*.o) with the soft float ABI and trying to link them with the system libraries that have a hard float ABI",FALSE,TRUE,33,79,169,11,FALSE,TRUE,FALSE,TRUE,0,80
japaric,"On the Rust ABI side, the mips(el)-gnu backend is generating binaries with the soft float ABI",FALSE,TRUE,16,79,171,13,FALSE,TRUE,FALSE,TRUE,0,80
japaric,"We should continue to use a soft float ABI toolchain to avoid mixing two different ABIs i.e. we shouldn't use the 16.04 official package, which is hard float ABI, but instead use a soft-float ABI one e.g. built with crosstool-ng",FALSE,TRUE,40,79,174,16,FALSE,TRUE,TRUE,TRUE,0,80
japaric,"Now, I'm actually surprised that #34841 passes on on the upgraded docker images, which have the 16.04 mips toolchain, ... I think this is because mixing these two float ABIs only generates a linker warning and not a hard error:",FALSE,TRUE,40,79,175,17,FALSE,TRUE,FALSE,TRUE,0,80
japaric,"Perhaps std appears to cross compile OK (albeit with linker warnings, which rustc doesn't bubble up (?)) but using that std to cross compile rust programs generates bad binaries (because of the mixed ABIs)? -- we don't really know because we don't have tests that execute cross compiled binaries. Anyway, I would advise against mixing two different float ABIs.",FALSE,TRUE,59,79,177,19,FALSE,TRUE,FALSE,TRUE,0,80
alexcrichton,"Looks like our mips targets were turned into soft float way back when, so I'm not sure they necessarily need to be soft float. @japaric do you know if there's a reason to do one or the other? It seems odd to me that the mipsel target would be hard float when the mips target isn't...",FALSE,TRUE,56,80,179,1,FALSE,TRUE,FALSE,TRUE,0,81
alexcrichton,"It's true though that we definitely shouldn't mix, but I think I'd personally prefer to just move everything over to hard float to match upstream toolchains if possible.",FALSE,TRUE,28,80,181,3,FALSE,TRUE,TRUE,TRUE,0,81
alexcrichton,"Oh dear, so... this will probably break external builds. Look like compiler-rt can't be built against older LLVM sources!",FALSE,TRUE,19,81,182,0,FALSE,TRUE,FALSE,TRUE,0,82
alexcrichton,"@brson thoughts on doing #34400 now?",FALSE,TRUE,6,81,183,1,FALSE,FALSE,FALSE,TRUE,0,82
alexcrichton,"Ok, thanks again for all the patience @badboy! I think we have a plan of action to solve the remaining problems:",FALSE,TRUE,21,82,184,0,FALSE,TRUE,FALSE,TRUE,0,83
alexcrichton,"To update cmake (to build LLVM 3.9) we will update the bots to Ubuntu 16.04, which pulls in a new MIPS toolchain (all other toolchains remain the same), which as @japaric points out has some differences in float support. I'll send a PR to change us over to hard-float for the MIPS targets (more consistent with debian), and it shouldn't affect this PR I believe.",FALSE,TRUE,65,82,185,1,FALSE,TRUE,TRUE,TRUE,0,83
alexcrichton,"To fix compiling compiler-rt against older LLVMs (or any other LLVM) we're going to pursue #34873. This will cut our ties with compiler-rt's build system, so all these questions go away!",FALSE,TRUE,31,82,186,2,FALSE,TRUE,FALSE,TRUE,0,83
alexcrichton,"So the remaining steps here are:",FALSE,TRUE,6,82,187,3,FALSE,TRUE,FALSE,TRUE,0,83
alexcrichton,"I will send a PR to use hard-float on MIPS, that can land whenever",FALSE,TRUE,14,82,188,4,FALSE,TRUE,FALSE,TRUE,0,83
alexcrichton,"We'll land #34873",FALSE,TRUE,3,82,189,5,FALSE,TRUE,FALSE,TRUE,0,83
alexcrichton,"I'll tweak the compiler-rt submodule to jettison all our build system patches and only keep the source patches.",FALSE,TRUE,18,82,190,6,FALSE,TRUE,FALSE,TRUE,0,83
alexcrichton,"You'll rebase this PR, including updates to the compiler-rt submodule",FALSE,TRUE,10,82,191,7,FALSE,TRUE,FALSE,TRUE,0,83
alexcrichton,"We'll wait for a green light on Travis",FALSE,TRUE,8,82,192,8,FALSE,TRUE,FALSE,TRUE,0,83
alexcrichton,"I'll restart buildbot, updating all the images",FALSE,TRUE,7,82,193,9,FALSE,TRUE,FALSE,TRUE,0,83
alexcrichton,"We'll send to @bors",FALSE,TRUE,4,82,194,10,FALSE,TRUE,FALSE,TRUE,0,83
alexcrichton,"Sound ok to you? Any last things you want to throw in on this branch?",FALSE,TRUE,15,82,195,11,FALSE,TRUE,FALSE,TRUE,0,83
badboy,"ðŸ‘? That sounds like a good plan (don't worry about my patience, I'm happy to get so much support in bringing this forward). I'll take a look at #34873 to understand what it does.",FALSE,TRUE,34,83,196,0,TRUE,TRUE,FALSE,TRUE,0,84
brson,"@brson thoughts on doing #34400 now?",FALSE,TRUE,6,84,197,0,FALSE,FALSE,FALSE,TRUE,0,85
alexcrichton,"Changing MIPS to hard float is #34910",FALSE,TRUE,7,85,199,0,FALSE,TRUE,FALSE,TRUE,0,86
alexcrichton,"Ok #34873 is almost ready to land (fingers crossed for this round). Unfortunately this branch doesn't build for me but with brson@7f5f54d it seems to work. I had to update the llvm-mc syntax b/c it changed in 3.9 and there was just one modification to a C++ file we had to keep from before. Other than that things are looking good so far.",FALSE,TRUE,63,86,200,0,FALSE,TRUE,FALSE,TRUE,0,87
alexcrichton,"If everything goes super well I'll just make a new PR with all these commits, that one, and the updated compiler-rt. Then I'll r+ that and see it merged when I wake up. I can dream can't I?",FALSE,TRUE,38,86,201,1,FALSE,TRUE,FALSE,TRUE,0,87
alexcrichton,"Alas perhaps not tonight, the g++ on the MinGW buildbots refuses to build LLVM no matter how I'm coaxing it right now, so gonna just have to sort that out tomorrow.",FALSE,TRUE,31,87,202,0,FALSE,TRUE,FALSE,TRUE,0,88
alexcrichton,"@badboy can you cherry pick 31daccb and f7c8e80 in here? No need to preserve commit messages or authorship or anything, they'll just need to be in this PR. The LLVM submodule will likely change again as I figure out how to compile it on MinGW again.",FALSE,TRUE,46,88,203,0,FALSE,TRUE,FALSE,TRUE,0,89
badboy,"Cherry-picks incoming ðŸ?’",FALSE,TRUE,3,89,204,0,TRUE,FALSE,FALSE,TRUE,0,90
badboy,"There we go, I picked them apart a bit, but the changes are the same.",FALSE,TRUE,15,90,205,0,TRUE,TRUE,FALSE,TRUE,0,91
alexcrichton,"Ok, I think I got LLVM working through some serious surgery. Looks like I messed up a bit with the grep condition in configure.",FALSE,TRUE,24,91,206,0,FALSE,TRUE,FALSE,TRUE,0,92
alexcrichton,"Also looks like tests are failing on the master branch because LLVM changed one of their custom target specifications, which we assert is the same as our own. If we change it, however, then we break with other LLVMs because they have a different data-layout as well. I'm just gonna disable that check for custom LLVMs for now and open an issue. Still working through failing tests though.",FALSE,TRUE,68,91,207,1,FALSE,TRUE,FALSE,TRUE,0,92
brson,"Wow that is a horrible patch :(",FALSE,TRUE,7,92,208,0,FALSE,FALSE,FALSE,TRUE,0,93
badboy,"@alexcrichton Should I already pull in the updates to the LLVM branch and the WIP changes?",FALSE,TRUE,16,93,209,0,TRUE,TRUE,FALSE,TRUE,0,94
badboy,"Ok, so I'm unable to find the actual commits in any cloned version of these repositoriesâ€¦",FALSE,TRUE,16,94,210,0,TRUE,TRUE,FALSE,TRUE,0,95
alexcrichton,"@badboy not quite yet, I'm still working on testing. Unfortunately there are tons of failures on the bots:",FALSE,TRUE,18,95,211,0,FALSE,TRUE,FALSE,TRUE,0,96
alexcrichton,"And... they're basically all failing for different reasons.",FALSE,TRUE,8,95,218,7,FALSE,TRUE,FALSE,TRUE,0,96
alexcrichton,"I had to apply this patch to get to that state, which:",FALSE,TRUE,12,95,219,8,FALSE,TRUE,FALSE,TRUE,0,96
alexcrichton,"Should pass tests on linux64 (locally for me)",FALSE,TRUE,8,95,220,9,FALSE,TRUE,FALSE,TRUE,0,96
alexcrichton,"The data-layout for aarch64 was changed, the data-layout assertion was relaxed for custom LLVMsA test was removed which I don't think ever actually needed to work.",FALSE,TRUE,26,95,221,10,FALSE,TRUE,FALSE,TRUE,0,96
alexcrichton,"Uses an LLVM that actually compiles on MinGW",FALSE,TRUE,8,95,222,11,FALSE,TRUE,FALSE,TRUE,0,96
alexcrichton,"Fixes a condition in the configure script.",FALSE,TRUE,7,95,223,12,FALSE,TRUE,FALSE,TRUE,0,96
alexcrichton,"I'm currently playing whack-a-mole with the bots in dev, trying to get a full suite of the failures so we can work through them.",FALSE,TRUE,24,96,224,0,FALSE,FALSE,FALSE,TRUE,0,97
alexcrichton,"Ok, I've got a full build now, failures are:",FALSE,TRUE,9,97,225,0,FALSE,TRUE,FALSE,TRUE,0,98
alexcrichton,"I unfortunately won't get a chance to look into these test failures yet, so any help investigating them would be much appreciated!",FALSE,TRUE,22,98,239,0,FALSE,FALSE,FALSE,TRUE,0,99
eddyb,"The err Error value needs to be checked, otherwise this happens with debug LLVM:",FALSE,TRUE,14,99,241,1,FALSE,TRUE,FALSE,TRUE,0,100
badboy,"will take care of that",FALSE,TRUE,5,100,242,0,TRUE,FALSE,FALSE,TRUE,0,101
eddyb,"You might need to set the PICLevel too, even if the relocation model is PIC.One potentially related failure is:",FALSE,TRUE,19,101,244,1,FALSE,TRUE,FALSE,TRUE,0,102
eddyb,"EDIT: Not that it would help, given how it's only used in PowerPC.",FALSE,TRUE,13,101,245,2,FALSE,TRUE,FALSE,TRUE,0,102
eddyb,"All the relocation nonsense was because, well, this mismatch:",FALSE,TRUE,9,102,246,0,FALSE,FALSE,FALSE,TRUE,0,103
eddyb,"So the Rust side had LLVMRelocMode, but LLVMRustCreateTargetMachine was taking Reloc::Model which meant that RelocMode::RelocPIC became Reloc::DynamicNoPIC.",FALSE,TRUE,17,102,247,1,FALSE,TRUE,FALSE,TRUE,0,103
eddyb,"The LLVMRust* functions MUST ONLY TAKE C TYPES.In this case, LLVMRelocMode, and do the conversion LLVMCreateTargetMachine does.",FALSE,TRUE,17,102,249,3,FALSE,TRUE,FALSE,TRUE,0,103
eddyb,"Aarch64 Android also needs a data-layout update:",FALSE,TRUE,7,103,250,0,FALSE,TRUE,FALSE,TRUE,0,104
badboy,"Thanks @eddyb, I'll take a look later today.",FALSE,TRUE,8,104,251,0,TRUE,TRUE,FALSE,TRUE,0,105
badboy,"Again, thanks @eddyb. I tracked it down to this commit: 7354055#diff-5bb596c9f589759bef3b0b31f5505d2eR2107It seems this was a type mismatch for quite some time.I will fix it in the above code.",FALSE,TRUE,28,105,252,0,TRUE,TRUE,FALSE,TRUE,0,106
DemiMarie,"Would it be possible to check with an LLVM clone over HTTPS? Just to make sure that nobody has MITM'd the insecure HTTP clone.",FALSE,FALSE,24,106,254,1,FALSE,TRUE,FALSE,TRUE,0,107
badboy,"@DemiMarie not sure what you mean. The submodule in this repository is at https://github.com/rust-lang/llvm, which is fetched over https.",FALSE,TRUE,19,107,255,0,TRUE,TRUE,FALSE,TRUE,0,108
badboy,"I changed the type on LLVMRustCreateTargetMachine and added the conversion.I also added explicit checks for the error, which has to be done in each iteration (did I mention that this API seems super weird o_O).cc @eddyb",FALSE,TRUE,36,108,256,0,TRUE,TRUE,FALSE,TRUE,0,109
badboy,"I'm no C++ expert and I don't understand this iterator at all, so I might be doing stuff wrong",FALSE,TRUE,19,108,257,1,TRUE,TRUE,FALSE,TRUE,0,109
badboy,"Ah damn, the optional is only necessary on newer LLVM -_-",FALSE,TRUE,11,109,258,0,TRUE,TRUE,FALSE,TRUE,0,110
badboy,"I added a conditional to use the raw type. Though right now it does not check RelocDefault. What should be the default in LLVM <= 3.8?",FALSE,TRUE,26,110,260,1,TRUE,TRUE,TRUE,TRUE,0,111
eddyb,"@badboy The old implementation uses Reloc::Default - btw, you can see that LLVMCodeModel and LLVMCodeGenOptLevel also need to be converted, if they match now it may be pure coincidence.",FALSE,TRUE,29,111,262,1,FALSE,TRUE,FALSE,TRUE,0,112
alexcrichton,"Ok, I've pushed this for testing.",FALSE,TRUE,6,112,263,0,FALSE,TRUE,FALSE,TRUE,0,113
alexcrichton,"@badboy could you also update with the fixes in brson/rust@7af5c98?",FALSE,TRUE,10,112,265,2,FALSE,FALSE,FALSE,TRUE,0,113
alexcrichton,"Ah it also looks like LLVM 3.9 has been branched, so if this passes all tests I may do one final rebase to get us onto the 3.9 release branch so we can just cherry-pick back their fixes easily if necessary.",FALSE,TRUE,41,113,266,0,FALSE,TRUE,FALSE,TRUE,0,114
badboy,"Will add the fixes.On IRC someone mentioned me about some of the C++ changes. I'll check that tomorrow as well.",FALSE,TRUE,20,114,267,0,TRUE,TRUE,FALSE,TRUE,0,115
alexcrichton,"Ah and FWIW I've been playing around with some more commits, and what I've done so far is:",FALSE,TRUE,18,115,268,0,FALSE,TRUE,FALSE,TRUE,0,116
alexcrichton,"Rebase this branch on master",FALSE,TRUE,5,115,269,1,FALSE,TRUE,FALSE,TRUE,0,116
alexcrichton,"Then apply the commits at https://github.com/brson/rust/commits/f8728ac0e2b4c36e8ce9e0c9a5169b32ad5cb40e",FALSE,TRUE,6,115,270,2,FALSE,TRUE,FALSE,TRUE,0,116
alexcrichton,"I've updated LLVM to the 3.9 release in that branch as well, and I think it's got most tests fixed now. The remaining thing to deal with is MSVC and llvm-config.",FALSE,TRUE,31,115,271,3,FALSE,TRUE,FALSE,TRUE,0,116
alexcrichton,"Ok I fixed up the llvm-config parsing for real this time (at https://github.com/rust-lang/rust/commits/c0e95ccd7c2bc5cd8e91aee25d65ae2699abb735).",FALSE,TRUE,13,116,272,0,FALSE,TRUE,FALSE,TRUE,0,117
alexcrichton,"Unfortunately all of the MSVC builders are still failing. They're all failing to compile getopts in stage1:",FALSE,TRUE,17,116,273,1,FALSE,TRUE,FALSE,TRUE,0,117
eddyb,"@alexcrichton My guess is a LLVM assertion that's not checked and leads to a segfault. It would be useful, at least here, to enable LLVM assertions.",FALSE,TRUE,26,117,276,1,FALSE,TRUE,FALSE,TRUE,0,118
alexcrichton,"Ok I sent rust-lang/rust@c0e95cc to bors and everything is green except MSVC, which is segfaulting.",FALSE,TRUE,15,118,277,0,FALSE,TRUE,FALSE,TRUE,0,119
eddyb,"I was wrong. It's an implementation bug, llvm-mirror/llvm@11bf1ab seems to be the fix. Rebasing on top of master should include it.",FALSE,TRUE,21,119,278,0,FALSE,TRUE,TRUE,TRUE,0,120
alexcrichton,"Ok, I've rebased LLVM and have sent that to dev-bors.",FALSE,TRUE,10,120,279,0,FALSE,TRUE,FALSE,TRUE,0,121
alexcrichton,"Results will be at http://54.176.156.253/grid as they come in",FALSE,TRUE,9,120,280,1,FALSE,TRUE,FALSE,TRUE,0,121
eddyb,"MSVC seems to be crashing in a few tests, which are actually assertion failures in debuginfo:",FALSE,TRUE,16,121,281,0,FALSE,FALSE,FALSE,TRUE,0,122
eddyb,"cc @michaelwoerister",FALSE,TRUE,2,121,282,1,FALSE,FALSE,FALSE,TRUE,0,122
eddyb,"EDIT: Backtrace is:",FALSE,TRUE,3,121,283,2,FALSE,TRUE,FALSE,TRUE,0,122
badboy,"vlad on IRC tried a LLVM 3.9 on Windows last week or so and has some tiny patches in his branch.More or less just tiny build system fixes, except for vvuk@c18c244",FALSE,TRUE,31,122,284,0,TRUE,TRUE,FALSE,TRUE,0,123
badboy,"Might this be a fix for above crashes?",FALSE,TRUE,8,122,285,1,TRUE,TRUE,FALSE,TRUE,0,123
alexcrichton,"Nice idea! I've sent that to bors-dev and we'll see what happens",FALSE,TRUE,12,123,286,0,FALSE,TRUE,FALSE,TRUE,0,124
alexcrichton,"Ok, looks like there may be two errors:",FALSE,TRUE,8,124,287,0,FALSE,FALSE,FALSE,TRUE,0,125
alexcrichton,"auto-linux-64-debug-opt - I think rustdoc is spuriously segfaulting?",FALSE,TRUE,8,124,288,1,FALSE,TRUE,FALSE,TRUE,0,125
alexcrichton,"auto-win-msvc-64-cargotest - hyper is segfaulting when compiling",FALSE,TRUE,7,124,289,2,FALSE,FALSE,FALSE,TRUE,0,125
alexcrichton,"for the latter, I got a backtrace:",FALSE,TRUE,7,124,290,3,FALSE,TRUE,FALSE,TRUE,0,125
eddyb,"@alexcrichton It's segfaulting in rustc while compiling librustc, not sure how that could be spurious.Could be a LLVM assertion though. If only we had those enabled always, we could tell :).",FALSE,TRUE,31,125,292,1,FALSE,TRUE,FALSE,TRUE,0,126
eddyb,"The MSVC one seems identical to the more general debuginfo problem which was supposedly fixed.",FALSE,TRUE,15,125,293,2,FALSE,TRUE,FALSE,TRUE,0,126
eddyb,"Is it possible NO_SCOPE_METADATA is also wrong now?",FALSE,TRUE,8,126,295,1,FALSE,TRUE,FALSE,TRUE,0,127
badboy,"You might be right. As far as I traced it the passed value gets unwrapped (which simply does a reinterpret_cast). Unwrapping a non-existent value in C++ is probably the same kind of bad as it is in Rust, except that in Rust it's properly safe to do so and panic.",FALSE,TRUE,50,127,296,0,TRUE,TRUE,FALSE,TRUE,0,128
michaelwoerister,"MSVC seems to be crashing in a few tests, which are actually assertion failures in debuginfo...",FALSE,TRUE,16,128,297,0,FALSE,FALSE,FALSE,TRUE,0,129
michaelwoerister,"I've seen this kind of assertion in the past in the following cases:",FALSE,TRUE,13,128,298,1,FALSE,TRUE,FALSE,TRUE,0,129
michaelwoerister,"When function calls where not assigned a debug location. Then inlining would lead to instructions seemingly coming from another function.",FALSE,TRUE,20,128,299,2,FALSE,TRUE,FALSE,TRUE,0,129
michaelwoerister,"When a bug lead to closures being translated multiple times, leading to multiple debuginfo descriptions for the same LLVM function.",FALSE,TRUE,20,128,300,3,FALSE,TRUE,FALSE,TRUE,0,129
michaelwoerister,"But this seems more likely to be a change in what kind of values LLVM expects in its API?",FALSE,TRUE,19,128,302,5,FALSE,TRUE,FALSE,TRUE,0,129
alexcrichton,"As an update on this I ran against @bors last night with this tree which included an update to the LLVM submodule that @eddyb was able to track down. This fixes the regression of hyper on auto-win-msvc-64-cargotest.",FALSE,TRUE,37,129,303,0,FALSE,TRUE,FALSE,TRUE,0,130
alexcrichton,"The final remaining failure is:",FALSE,TRUE,5,129,304,1,FALSE,TRUE,FALSE,TRUE,0,130
alexcrichton,"@badboy Can you include a few more commits here as well?",FALSE,TRUE,11,129,306,3,FALSE,TRUE,FALSE,TRUE,0,130
alexcrichton,"brson@29c9cb3 - a fix to an MSVC test",FALSE,TRUE,8,129,307,4,FALSE,TRUE,FALSE,TRUE,0,130
alexcrichton,"brson@be0416b - fix for the ArchiveWrapper compilation",FALSE,TRUE,7,129,308,5,FALSE,TRUE,FALSE,TRUE,0,130
alexcrichton,"brson@ebd64f2 - the most recent LLVM update",FALSE,TRUE,7,129,309,6,FALSE,TRUE,FALSE,TRUE,0,130
bors,"â˜”ï¸? The latest upstream changes (presumably #34956) made this pull request unmergeable. Please resolve the merge conflicts.",FALSE,TRUE,17,130,310,0,FALSE,TRUE,FALSE,TRUE,0,131
badboy,"I just rebased this PR on master, applied the remaining patches and pushed it again.",FALSE,TRUE,15,131,311,0,TRUE,TRUE,FALSE,TRUE,0,132
eddyb,"@bors r+ p=10",FALSE,TRUE,3,132,312,0,FALSE,FALSE,FALSE,TRUE,0,133
bors,"ðŸ“Œ Commit 7c0cd30 has been approved by eddyb",FALSE,TRUE,8,133,313,0,FALSE,TRUE,FALSE,TRUE,0,134
bors,"âŒ›ï¸? Testing commit 7c0cd30 with merge 554bc72...",FALSE,TRUE,7,134,314,0,FALSE,TRUE,FALSE,TRUE,0,135
bors,"ðŸ’” Test failed - auto-win-gnu-32-opt",FALSE,TRUE,5,135,315,0,FALSE,TRUE,FALSE,TRUE,0,136
alexcrichton,"@bors: retry",FALSE,TRUE,2,136,316,0,FALSE,FALSE,FALSE,TRUE,0,137
alexcrichton,"forgot to update the windows bots, now doing so",FALSE,TRUE,9,136,317,1,FALSE,FALSE,FALSE,TRUE,0,137
alexcrichton,"@bors: force",FALSE,TRUE,2,137,318,0,FALSE,FALSE,FALSE,TRUE,0,138
alexcrichton,"@bors: retry",FALSE,TRUE,2,138,319,0,FALSE,FALSE,FALSE,TRUE,0,139
alexcrichton,"@bors: force",FALSE,TRUE,2,139,320,0,FALSE,FALSE,FALSE,TRUE,0,140
michaelwoerister,"Use the Force, young Skywalker!",FALSE,TRUE,5,140,321,0,FALSE,TRUE,FALSE,TRUE,0,141
alexcrichton,"@bors: retry force clean",FALSE,TRUE,4,141,322,0,FALSE,FALSE,FALSE,TRUE,0,142
bors,"âŒ›ï¸? Testing commit 7c0cd30 with merge bea0adf...",FALSE,TRUE,7,142,323,0,FALSE,TRUE,FALSE,TRUE,0,143
bors,"ðŸ’” Test failed - auto-linux-64-nopt-t",FALSE,TRUE,5,143,324,0,FALSE,TRUE,FALSE,TRUE,0,144
alexcrichton,"@bors: retry force clean",FALSE,TRUE,4,144,325,0,FALSE,FALSE,FALSE,TRUE,0,145
bors,"âŒ›ï¸? Testing commit 7c0cd30 with merge 21ea9cd...",FALSE,TRUE,7,145,326,0,FALSE,TRUE,FALSE,TRUE,0,146
bors,"ðŸ’” Test failed - auto-linux-64-opt-rustbuild",FALSE,TRUE,5,146,327,0,FALSE,TRUE,FALSE,TRUE,0,147
alexcrichton,"@bors: retry",FALSE,TRUE,2,147,328,0,FALSE,FALSE,FALSE,TRUE,0,148
bors,"âŒ›ï¸? Testing commit 7c0cd30 with merge 8f92cbd...",FALSE,TRUE,7,148,329,0,FALSE,TRUE,FALSE,TRUE,0,149
bors,"ðŸ’” Test failed - auto-linux-64-debug-opt",FALSE,TRUE,5,149,330,0,FALSE,TRUE,FALSE,TRUE,0,150
badboy,"Hmpf. Is there anyway to get anymore debugable info out of that build?",FALSE,TRUE,13,150,331,0,TRUE,TRUE,FALSE,TRUE,0,151
eddyb,"@badboy We've tried. Preloading libSegFault.so doesn't work for some reason and Ubuntu has that stupid apport thing that interferes with core dumps. @alexcrichton would have to fix the apport nonsense on the bots before triggering a full build with all the bots on, it's harder to reproduce in isolation.",FALSE,TRUE,49,151,332,0,FALSE,TRUE,FALSE,TRUE,0,152
tmiasko,"I had similar segfault while building this branch. rustc consistently crashedwhile deleting DIBuilder from LLVM. Starting from a clean working directoryfixed it. Given that buildbot reports that  clean-llvm cleaned llvm skipped ,maybe it could also help here.",FALSE,FALSE,36,152,333,0,FALSE,TRUE,FALSE,TRUE,0,153
eddyb,"@tmiasko That's interesting. Do you have a backtrace? We couldn't get anything, reproduction seemed to need the concurrent builds, or a specific builder, to trigger.",FALSE,TRUE,25,153,334,0,FALSE,TRUE,FALSE,TRUE,0,154
alexcrichton,"@tmiasko did some digging and discovered that https://reviews.llvm.org/D22858 may be relevant (stack trace gathered). I've updated our LLVM submodule with this commit (rebased on the llvm/release_39 branch) and now it's rust-lang/llvm@d1cc489. @badboy wanna try updating to that and give it a go? Builds in dev are running, but we can do in parallel hopefully :)",FALSE,TRUE,55,154,335,0,FALSE,TRUE,FALSE,TRUE,0,155
badboy,"Done! Upgraded to d1cc489",FALSE,TRUE,4,155,336,0,TRUE,TRUE,FALSE,TRUE,0,156
eddyb,"@bors r+",FALSE,TRUE,2,156,337,0,FALSE,FALSE,FALSE,TRUE,0,157
bors,"ðŸ“Œ Commit 5d1d247 has been approved by eddyb",FALSE,TRUE,8,157,338,0,FALSE,TRUE,FALSE,TRUE,0,158
bors,"âŒ›ï¸? Testing commit 5d1d247 with merge 2c1612c...",FALSE,TRUE,7,158,339,0,FALSE,TRUE,FALSE,TRUE,0,159
bors,"â˜€ï¸? Test successful - auto-linux-32-nopt-t, auto-linux-32-opt, auto-linux-64-cargotest, auto-linux-64-cross-freebsd, auto-linux-64-debug-opt, auto-linux-64-nopt-t, auto-linux-64-opt, auto-linux-64-opt-mir, auto-linux-64-opt-rustbuild, auto-linux-64-x-android-t, auto-linux-cross-opt, auto-linux-musl-64-opt, auto-mac-32-opt, auto-mac-64-opt, auto-mac-64-opt-rustbuild, auto-mac-cross-ios-opt, auto-win-gnu-32-opt, auto-win-gnu-32-opt-rustbuild, auto-win-gnu-64-opt, auto-win-msvc-32-opt, auto-win-msvc-64-cargotest, auto-win-msvc-64-opt, auto-win-msvc-64-opt-mir, auto-win-msvc-64-opt-rustbuildApproved by: eddybPushing 2c1612c to master...",FALSE,TRUE,33,159,340,0,FALSE,TRUE,FALSE,TRUE,0,160
badboy,"Wuhu! ðŸŽ‰",FALSE,TRUE,2,160,341,0,TRUE,FALSE,FALSE,TRUE,0,161
eminence,"Outstanding work everyone!",FALSE,FALSE,3,161,342,0,FALSE,FALSE,FALSE,TRUE,0,162
michaelwoerister,"Epic! :)",FALSE,TRUE,2,162,343,0,FALSE,FALSE,FALSE,TRUE,0,163
shepmaster,"Hurrah! Now it's time to rebase the AVR and Emscripten forks and really give it a workout ;-)",FALSE,TRUE,18,163,344,0,FALSE,TRUE,FALSE,TRUE,0,164
badboy,"@shepmaster: That's the next step and I'll try to work on it this week",FALSE,TRUE,14,164,345,0,TRUE,TRUE,FALSE,TRUE,0,165
bstrie,"Heroes, every one of you! On with MIR!",FALSE,FALSE,8,165,346,0,FALSE,TRUE,FALSE,TRUE,0,166
whitequark,"Looks like this missed the LLVM version check in configure, not sure why it didn't break bots:",FALSE,FALSE,17,166,347,0,FALSE,TRUE,FALSE,TRUE,0,167
shepmaster,"I have a PR out for that - #35594. No idea about the bots.",FALSE,TRUE,14,167,348,0,FALSE,TRUE,FALSE,TRUE,0,168
